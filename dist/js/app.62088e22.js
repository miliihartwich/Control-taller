(function(){"use strict";var e={6598:function(e,o,a){var t=a(5130),r=a(6768);const i={id:"app"};function n(e,o,a,t,n,s){const l=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.bF)(l)])}var s={name:"App"},l=a(1241);const c=(0,l.A)(s,[["render",n]]);var d=c,u=a(1387);const p={class:"home"},m={class:"buttons-container"};function h(e,o,a,t,i,n){const s=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",p,[o[2]||(o[2]=(0,r.Lk)("div",{class:"header"},[(0,r.Lk)("h1",null,"HARTWICH INGENIERIA")],-1)),(0,r.Lk)("div",m,[(0,r.bF)(s,{to:"/login"},{default:(0,r.k6)((()=>o[0]||(o[0]=[(0,r.Lk)("button",{class:"btn"},"Iniciar sesión",-1)]))),_:1}),(0,r.bF)(s,{to:"/register"},{default:(0,r.k6)((()=>o[1]||(o[1]=[(0,r.Lk)("button",{class:"btn"},"Registrarse",-1)]))),_:1})])])}var v={name:"HomePage"};const b=(0,l.A)(v,[["render",h],["__scopeId","data-v-0108c1a6"]]);var k=b,f=a(4232);const L={class:"login"},g={class:"form-container"},C={key:0,class:"error-message"},_={class:"input-group"},y={class:"input-group"},E={class:"buttons-container"};function w(e,o,a,i,n,s){const l=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",L,[o[7]||(o[7]=(0,r.Lk)("div",{class:"header"},[(0,r.Lk)("h1",null,"Iniciar sesión")],-1)),(0,r.Lk)("div",g,[n.errorMessage?((0,r.uX)(),(0,r.CE)("div",C,(0,f.v_)(n.errorMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("div",_,[o[3]||(o[3]=(0,r.Lk)("label",{for:"username"},"Usuario",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>n.username=e),id:"username",placeholder:"Ingrese su usuario"},null,512),[[t.Jo,n.username]])]),(0,r.Lk)("div",y,[o[5]||(o[5]=(0,r.Lk)("label",{for:"password"},"Contraseña",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":o[1]||(o[1]=e=>n.password=e),id:"password",placeholder:"Ingrese su contraseña"},null,512),[[t.Jo,n.password]]),(0,r.bF)(l,{to:"/forgot-password",class:"forgot-password-link"},{default:(0,r.k6)((()=>o[4]||(o[4]=[(0,r.eW)(" Olvidé mi contraseña ")]))),_:1})]),(0,r.Lk)("div",E,[(0,r.Lk)("button",{onClick:o[2]||(o[2]=(...e)=>s.login&&s.login(...e)),class:"btn"},"Iniciar sesión"),(0,r.bF)(l,{to:"/"},{default:(0,r.k6)((()=>o[6]||(o[6]=[(0,r.Lk)("button",{class:"btn"},"Volver",-1)]))),_:1})])])])}a(4114);var j=a(4373),M={name:"LoginPage",data(){return{username:"",password:"",errorMessage:""}},methods:{async login(){if(this.errorMessage="",this.username&&this.password){console.log("Intentando iniciar sesión con:",this.username,this.password);try{const e=await j.A.post("https://control-taller-1a9d81bbc513.herokuapp.com/login",{usuario:this.username,contrasena:this.password});if(console.log("Respuesta del backend:",e.data),e.data.access_token){const{usuario:o,cedula:a,rol:t}=e.data;localStorage.setItem("access_token",e.data.access_token),localStorage.setItem("usuario",o),localStorage.setItem("cedula",a),localStorage.setItem("rol",t),"operario"===t?this.$router.push("/intervencion-operario"):"propietario"!==t&&"administracion"!==t||this.$router.push("/menu")}}catch(e){console.error("Error en la solicitud:",e),e.response?400===e.response.status?this.errorMessage="Solicitud incorrecta. Verifique los datos.":401===e.response.status?this.errorMessage="Contraseña incorrecta.":404===e.response.status?this.errorMessage="Usuario no encontrado.":this.errorMessage="Error en el servidor. Intente más tarde.":this.errorMessage="No se pudo conectar con el servidor."}}else this.errorMessage="Por favor, complete todos los campos."}}};const I=(0,l.A)(M,[["render",w],["__scopeId","data-v-4c5b90c6"]]);var T=I;const D={class:"register"},U={class:"form-container"},x={class:"input-group"},A={class:"input-group"},F={class:"input-group"},X={class:"input-group"},V=["value"],P={class:"buttons-container"};function S(e,o,a,i,n,s){const l=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",D,[o[11]||(o[11]=(0,r.Lk)("div",{class:"header"},[(0,r.Lk)("h1",null,"REGISTRARSE")],-1)),(0,r.Lk)("div",U,[(0,r.Lk)("div",x,[o[5]||(o[5]=(0,r.Lk)("label",{for:"username"},"Usuario",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":o[0]||(o[0]=e=>n.usuario=e),placeholder:"Escriba aquí..."},null,512),[[t.Jo,n.usuario]])]),(0,r.Lk)("div",A,[o[6]||(o[6]=(0,r.Lk)("label",{for:"contrasena"},"Contraseña",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"contrasena","onUpdate:modelValue":o[1]||(o[1]=e=>n.contrasena=e),placeholder:"Escriba aquí..."},null,512),[[t.Jo,n.contrasena]])]),(0,r.Lk)("div",F,[o[7]||(o[7]=(0,r.Lk)("label",{for:"confirm-password"},"Repita contraseña",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"confirm-password","onUpdate:modelValue":o[2]||(o[2]=e=>n.confirmContrasena=e),placeholder:"Escriba aquí..."},null,512),[[t.Jo,n.confirmContrasena]])]),(0,r.Lk)("div",X,[o[9]||(o[9]=(0,r.Lk)("label",{for:"empleado"},"Empleado",-1)),(0,r.bo)((0,r.Lk)("select",{id:"empleado","onUpdate:modelValue":o[3]||(o[3]=e=>n.empleado=e)},[o[8]||(o[8]=(0,r.Lk)("option",{value:"",disabled:""},"Elija una opción...",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.empleados,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.cedula,value:e.cedula},(0,f.v_)(e.nombre),9,V)))),128))],512),[[t.u1,n.empleado]])]),(0,r.Lk)("div",P,[(0,r.Lk)("button",{class:"btn",onClick:o[4]||(o[4]=(...e)=>s.registrar&&s.registrar(...e))},"REGISTRARME"),(0,r.bF)(l,{to:"/"},{default:(0,r.k6)((()=>o[10]||(o[10]=[(0,r.Lk)("button",{class:"btn"},"Volver",-1)]))),_:1})]),n.mensaje?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,f.C4)(["mensaje",n.tipoMensaje])},(0,f.v_)(n.mensaje),3)):(0,r.Q3)("",!0)])])}var N={name:"RegisterPage",data(){return{usuario:"",rol:"operario",contrasena:"",confirmContrasena:"",empleado:"",empleados:[],mensaje:"",tipoMensaje:""}},methods:{async fetchEmpleados(){try{const e=await j.A.get("https://control-taller-1a9d81bbc513.herokuapp.com/obtener_empleados");this.empleados=e.data}catch(e){console.error("Error obteniendo empleados",e)}},async registrar(){if(!this.usuario||!this.contrasena||!this.confirmContrasena||!this.empleado)return this.mensaje="Todos los campos son obligatorios.",void(this.tipoMensaje="error");if(this.contrasena!==this.confirmContrasena)return this.mensaje="Las contraseñas no coinciden.",void(this.tipoMensaje="error");try{const e=await j.A.post("https://control-taller-1a9d81bbc513.herokuapp.com/registrar_usuario",{usuario:this.usuario,rol:this.rol,contrasena:this.contrasena,cedula:this.empleado});e.data.success?(this.mensaje=e.data.message,this.tipoMensaje="exito"):(this.mensaje=e.data.message||"Error desconocido",this.tipoMensaje="error")}catch(e){e.response&&e.response.data?this.mensaje=e.response.data.message||"Error al registrar usuario":this.mensaje="Error de conexión con el servidor",this.tipoMensaje="error",console.error(e)}}},mounted(){this.fetchEmpleados()}};const R=(0,l.A)(N,[["render",S],["__scopeId","data-v-3566863e"]]);var O=R;const J={class:"form-container"},$={class:"input-group"},q={class:"input-group"},K={class:"input-group"},Q={class:"input-group"},H={class:"input-group"},W={class:"input-group"},G={class:"input-group"},B={class:"buttons-container"};function z(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",J,[o[16]||(o[16]=(0,r.Lk)("h1",{class:"titulo"},"EMPLEADO",-1)),(0,r.Lk)("div",$,[o[9]||(o[9]=(0,r.Lk)("label",{for:"cedula"},"Cédula",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>n.empleado.cedula=e),type:"text",id:"cedula",placeholder:"Type here..."},null,512),[[t.Jo,n.empleado.cedula]])]),(0,r.Lk)("div",q,[o[10]||(o[10]=(0,r.Lk)("label",{for:"nombre"},"Nombre",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>n.empleado.nombre=e),type:"text",id:"nombre",placeholder:"Type here..."},null,512),[[t.Jo,n.empleado.nombre]])]),(0,r.Lk)("div",K,[o[11]||(o[11]=(0,r.Lk)("label",{for:"celular"},"Celular",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>n.empleado.celular=e),type:"text",id:"celular",placeholder:"Type here..."},null,512),[[t.Jo,n.empleado.celular]])]),(0,r.Lk)("div",Q,[o[12]||(o[12]=(0,r.Lk)("label",{for:"factor"},"Factor",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>n.empleado.factor=e),type:"text",id:"factor",placeholder:"Type here..."},null,512),[[t.Jo,n.empleado.factor]])]),(0,r.Lk)("div",H,[o[13]||(o[13]=(0,r.Lk)("label",{for:"direccion"},"Dirección",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>n.empleado.direccion=e),type:"text",id:"direccion",placeholder:"Type here..."},null,512),[[t.Jo,n.empleado.direccion]])]),(0,r.Lk)("div",W,[o[14]||(o[14]=(0,r.Lk)("label",{for:"remuneracion"},"Remuneración",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>n.empleado.remuneracion=e),type:"text",id:"remuneracion",placeholder:"Type here..."},null,512),[[t.Jo,n.empleado.remuneracion]])]),(0,r.Lk)("div",G,[o[15]||(o[15]=(0,r.Lk)("label",{for:"fecha_vencimiento_carnet"},"Fecha Vencimiento Carnet",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[6]||(o[6]=e=>n.empleado.fecha_vencimiento_carnet=e),type:"date",id:"fecha_vencimiento_carnet"},null,512),[[t.Jo,n.empleado.fecha_vencimiento_carnet]])]),(0,r.Lk)("div",B,[(0,r.Lk)("button",{class:"btn",onClick:o[7]||(o[7]=(...e)=>s.guardarEmpleado&&s.guardarEmpleado(...e))},"GUARDAR"),(0,r.Lk)("button",{onClick:o[8]||(o[8]=e=>s.goTo("MenuPage")),class:"btn"},"Menú")]),n.mensaje?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,f.C4)(["mensaje",n.exito?"exito":"error"])},(0,f.v_)(n.mensaje),3)):(0,r.Q3)("",!0)])}var Y={data(){return{empleado:{cedula:"",nombre:"",celular:"",factor:"",direccion:"",remuneracion:"",fecha_vencimiento_carnet:""},mensaje:"",exito:!1}},methods:{async guardarEmpleado(){try{const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/empleado",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.empleado)});if(e.ok){const o=await e.json();this.mensaje=o.message,this.exito=!0,this.limpiarFormulario()}else{const o=await e.json();this.mensaje=o.message||"Error al guardar el empleado.",this.exito=!1}}catch(e){console.error("Error:",e),this.mensaje="Error al conectar con el servidor.",this.exito=!1}},limpiarFormulario(){this.empleado={cedula:"",nombre:"",celular:"",factor:"",direccion:"",remuneracion:"",fecha_vencimiento_carnet:""}},goTo(e){this.$router.push({name:e})}}};const Z=(0,l.A)(Y,[["render",z],["__scopeId","data-v-61a8d158"]]);var ee=Z;const oe={class:"form-container"},ae={class:"input-group"},te={class:"input-group"},re={class:"input-group"},ie={class:"input-group"},ne={class:"input-group"},se={class:"input-group"},le={class:"input-group"},ce=["value"],de={class:"input-group"},ue=["value"],pe={class:"input-group"},me={class:"input-group"},he=["value"],ve={key:0,class:"nuevo-rubro"},be={class:"input-group"},ke={class:"input-group"},fe=["value"],Le={class:"buttons-container"};function ge(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",oe,[o[31]||(o[31]=(0,r.Lk)("h1",{class:"titulo"},"PROVEEDOR",-1)),(0,r.Lk)("div",ae,[o[19]||(o[19]=(0,r.Lk)("label",{for:"rut-ci"},"RUT/CI",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>n.proveedor.rut_ci=e),type:"text",id:"rut-ci",placeholder:"Type here..."},null,512),[[t.Jo,n.proveedor.rut_ci]])]),(0,r.Lk)("div",te,[o[20]||(o[20]=(0,r.Lk)("label",{for:"nombre"},"Nombre",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>n.proveedor.nombre=e),type:"text",id:"nombre",placeholder:"Type here..."},null,512),[[t.Jo,n.proveedor.nombre]])]),(0,r.Lk)("div",re,[o[21]||(o[21]=(0,r.Lk)("label",{for:"alias"},"Alias",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>n.proveedor.alias=e),type:"text",id:"alias",placeholder:"Type here..."},null,512),[[t.Jo,n.proveedor.alias]])]),(0,r.Lk)("div",ie,[o[22]||(o[22]=(0,r.Lk)("label",{for:"telefono"},"Teléfono",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>n.proveedor.telefono=e),type:"text",id:"telefono",placeholder:"Type here..."},null,512),[[t.Jo,n.proveedor.telefono]])]),(0,r.Lk)("div",ne,[o[23]||(o[23]=(0,r.Lk)("label",{for:"whatsapp"},"Whatsapp",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>n.proveedor.whatsapp=e),type:"text",id:"whatsapp",placeholder:"Type here..."},null,512),[[t.Jo,n.proveedor.whatsapp]])]),(0,r.Lk)("div",se,[o[24]||(o[24]=(0,r.Lk)("label",{for:"mail"},"Mail",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>n.proveedor.mail=e),type:"text",id:"mail",placeholder:"Type here..."},null,512),[[t.Jo,n.proveedor.mail]])]),(0,r.Lk)("div",le,[o[25]||(o[25]=(0,r.Lk)("label",{for:"departamento"},"Departamento",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[6]||(o[6]=e=>n.proveedor.departamento=e),id:"departamento",onChange:o[7]||(o[7]=(...e)=>s.cargarLocalidades&&s.cargarLocalidades(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.departamentos,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,ce)))),128))],544),[[t.u1,n.proveedor.departamento]])]),(0,r.Lk)("div",de,[o[26]||(o[26]=(0,r.Lk)("label",{for:"localidad"},"Localidad",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[8]||(o[8]=e=>n.proveedor.localidad=e),id:"localidad"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.localidades,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,ue)))),128))],512),[[t.u1,n.proveedor.localidad]])]),(0,r.Lk)("div",pe,[o[27]||(o[27]=(0,r.Lk)("label",{for:"direccion"},"Dirección",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[9]||(o[9]=e=>n.proveedor.direccion=e),type:"text",id:"direccion",placeholder:"Type here..."},null,512),[[t.Jo,n.proveedor.direccion]])]),(0,r.Lk)("div",me,[o[28]||(o[28]=(0,r.Lk)("label",{for:"rubro"},"Rubro",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[10]||(o[10]=e=>n.proveedor.rubro=e),id:"rubro"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.rubros,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.nombre},(0,f.v_)(e.nombre),9,he)))),128))],512),[[t.u1,n.proveedor.rubro]]),(0,r.Lk)("button",{onClick:o[11]||(o[11]=(...e)=>s.mostrarCampoNuevoRubro&&s.mostrarCampoNuevoRubro(...e)),class:"btn-nuevo"},"NUEVO")]),n.mostrarNuevoRubro?((0,r.uX)(),(0,r.CE)("div",ve,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[12]||(o[12]=e=>n.nuevoRubroNombre=e),type:"text",placeholder:"Ingrese nuevo rubro..."},null,512),[[t.Jo,n.nuevoRubroNombre]]),(0,r.Lk)("button",{onClick:o[13]||(o[13]=(...e)=>s.guardarNuevoRubro&&s.guardarNuevoRubro(...e)),class:"btn-guardar"},"Guardar"),(0,r.Lk)("button",{onClick:o[14]||(o[14]=(...e)=>s.cerrarNuevoRubro&&s.cerrarNuevoRubro(...e)),class:"btn-cerrar"},"Cerrar")])):(0,r.Q3)("",!0),(0,r.Lk)("div",be,[o[29]||(o[29]=(0,r.Lk)("label",{for:"comentarios"},"Comentarios",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[15]||(o[15]=e=>n.proveedor.comentarios=e),type:"text",id:"comentarios",placeholder:"Type here..."},null,512),[[t.Jo,n.proveedor.comentarios]])]),(0,r.Lk)("div",ke,[o[30]||(o[30]=(0,r.Lk)("label",{for:"calificacion"},"Calificación",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[16]||(o[16]=e=>n.proveedor.calificacion=e),id:"calificacion"},[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(10,(e=>(0,r.Lk)("option",{key:e,value:e},(0,f.v_)(e),9,fe))),64))],512),[[t.u1,n.proveedor.calificacion]])]),(0,r.Lk)("div",Le,[(0,r.Lk)("button",{class:"btn",onClick:o[17]||(o[17]=(...e)=>s.guardarProveedor&&s.guardarProveedor(...e))},"GUARDAR"),(0,r.Lk)("button",{onClick:o[18]||(o[18]=e=>s.goTo("MenuPage")),class:"btn"},"Menú")]),n.mensaje?((0,r.uX)(),(0,r.CE)("div",{key:1,class:(0,f.C4)(["mensaje",n.exito?"exito":"error"])},(0,f.v_)(n.mensaje),3)):(0,r.Q3)("",!0)])}var Ce={data(){return{proveedor:{rut_ci:"",nombre:"",alias:"",telefono:"",whatsapp:"",mail:"",departamento:"",localidad:"",direccion:"",rubro:"",comentarios:"",calificacion:""},departamentos:[],localidades:[],rubros:[],nuevoRubroNombre:"",mostrarNuevoRubro:!1,mensaje:"",exito:!1}},methods:{async cargarDepartamentos(){try{const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/departamentos"),o=await e.json();this.departamentos=o.departamentos}catch(e){console.error("Error:",e)}},async cargarLocalidades(){try{const e=await fetch(`https://control-taller-1a9d81bbc513.herokuapp.com/localidades?departamento=${this.proveedor.departamento}`),o=await e.json();this.localidades=o.localidades}catch(e){console.error("Error:",e)}},async cargarRubros(){try{const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/rubros"),o=await e.json();this.rubros=o.rubros}catch(e){console.error("Error:",e)}},mostrarCampoNuevoRubro(){this.mostrarNuevoRubro=!0},cerrarNuevoRubro(){this.mostrarNuevoRubro=!1,this.nuevoRubroNombre=""},async guardarNuevoRubro(){if(!this.nuevoRubroNombre.trim())return this.mensaje="Debe ingresar un nombre para el rubro.",void(this.exito=!1);try{const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/rubroscrear",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rubro_nombre:this.nuevoRubroNombre})});if(e.ok)this.mensaje="Rubro creado exitosamente.",this.exito=!0,this.cargarRubros(),this.cerrarNuevoRubro();else{const o=await e.json();this.mensaje=o.mensaje||"Error al crear el rubro.",this.exito=!1}}catch(e){console.error("Error:",e),this.mensaje="Error al conectar con el servidor.",this.exito=!1}},async guardarProveedor(){try{const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/proveedor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.proveedor)});if(e.ok){const o=await e.json();this.mensaje=o.message,this.exito=!0,this.limpiarFormulario()}else{const o=await e.json();this.mensaje=o.message||"Error al guardar el proveedor.",this.exito=!1}}catch(e){console.error("Error:",e),this.mensaje="Error al conectar con el servidor.",this.exito=!1}},limpiarFormulario(){this.proveedor={rut_ci:"",nombre:"",alias:"",telefono:"",whatsapp:"",mail:"",departamento:"",localidad:"",direccion:"",rubro:"",comentarios:"",calificacion:""}},goTo(e){this.$router.push({name:e})}},created(){this.cargarDepartamentos(),this.cargarRubros()}};const _e=(0,l.A)(Ce,[["render",ge],["__scopeId","data-v-18e2b143"]]);var ye=_e;const Ee={class:"form-container"},we={class:"input-group"},je={class:"input-group"},Me={class:"input-group"},Ie={class:"input-group"},Te={class:"input-group"},De={class:"input-group"},Ue={class:"input-group"},xe=["value"],Ae={class:"input-group"},Fe=["value"],Xe={class:"input-group"},Ve={class:"buttons-container"};function Pe(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",Ee,[o[21]||(o[21]=(0,r.Lk)("h1",{class:"titulo"},"CLIENTE",-1)),(0,r.Lk)("div",we,[o[12]||(o[12]=(0,r.Lk)("label",{for:"rut-ci"},"RUT/CI",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>n.cliente.rut_ci=e),type:"text",id:"rut-ci",placeholder:"Type here..."},null,512),[[t.Jo,n.cliente.rut_ci]])]),(0,r.Lk)("div",je,[o[13]||(o[13]=(0,r.Lk)("label",{for:"nombre"},"Nombre",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>n.cliente.nombre=e),type:"text",id:"nombre",placeholder:"Type here..."},null,512),[[t.Jo,n.cliente.nombre]])]),(0,r.Lk)("div",Me,[o[14]||(o[14]=(0,r.Lk)("label",{for:"alias"},"Alias",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>n.cliente.alias=e),type:"text",id:"alias",placeholder:"Type here..."},null,512),[[t.Jo,n.cliente.alias]])]),(0,r.Lk)("div",Ie,[o[15]||(o[15]=(0,r.Lk)("label",{for:"telefono"},"Teléfono",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>n.cliente.telefono=e),type:"text",id:"telefono",placeholder:"Type here..."},null,512),[[t.Jo,n.cliente.telefono]])]),(0,r.Lk)("div",Te,[o[16]||(o[16]=(0,r.Lk)("label",{for:"whatsapp"},"Whatsapp",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>n.cliente.whatsapp=e),type:"text",id:"whatsapp",placeholder:"Type here..."},null,512),[[t.Jo,n.cliente.whatsapp]])]),(0,r.Lk)("div",De,[o[17]||(o[17]=(0,r.Lk)("label",{for:"mail"},"Mail",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>n.cliente.mail=e),type:"text",id:"mail",placeholder:"Type here..."},null,512),[[t.Jo,n.cliente.mail]])]),(0,r.Lk)("div",Ue,[o[18]||(o[18]=(0,r.Lk)("label",{for:"departamento"},"Departamento",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[6]||(o[6]=e=>n.cliente.departamento=e),id:"departamento",onChange:o[7]||(o[7]=(...e)=>s.cargarLocalidades&&s.cargarLocalidades(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.departamentos,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,xe)))),128))],544),[[t.u1,n.cliente.departamento]])]),(0,r.Lk)("div",Ae,[o[19]||(o[19]=(0,r.Lk)("label",{for:"localidad"},"Localidad",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[8]||(o[8]=e=>n.cliente.localidad=e),id:"localidad"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.localidades,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,Fe)))),128))],512),[[t.u1,n.cliente.localidad]])]),(0,r.Lk)("div",Xe,[o[20]||(o[20]=(0,r.Lk)("label",{for:"direccion"},"Dirección",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[9]||(o[9]=e=>n.cliente.direccion=e),type:"text",id:"direccion",placeholder:"Type here..."},null,512),[[t.Jo,n.cliente.direccion]])]),(0,r.Lk)("div",Ve,[(0,r.Lk)("button",{class:"btn",onClick:o[10]||(o[10]=(...e)=>s.guardarCliente&&s.guardarCliente(...e))},"GUARDAR"),(0,r.Lk)("button",{onClick:o[11]||(o[11]=e=>s.goTo("MenuPage")),class:"btn"},"Menú")]),n.mensaje?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,f.C4)(["mensaje",n.exito?"exito":"error"])},(0,f.v_)(n.mensaje),3)):(0,r.Q3)("",!0)])}var Se={data(){return{cliente:{rut_ci:"",nombre:"",alias:"",telefono:"",whatsapp:"",mail:"",departamento:"",localidad:"",direccion:""},departamentos:[],localidades:[],mensaje:"",exito:!1}},methods:{async cargarDepartamentos(){try{const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/departamentos"),o=await e.json();this.departamentos=o.departamentos}catch(e){console.error("Error:",e)}},async cargarLocalidades(){try{const e=await fetch(`https://control-taller-1a9d81bbc513.herokuapp.com/localidades?departamento=${this.cliente.departamento}`),o=await e.json();this.localidades=o.localidades}catch(e){console.error("Error:",e)}},async guardarCliente(){try{const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/cliente",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.cliente)});if(e.ok){const o=await e.json();this.mensaje=o.message,this.exito=!0,this.limpiarFormulario()}else{const o=await e.json();this.mensaje=o.message||"Error al guardar el cliente.",this.exito=!1}}catch(e){console.error("Error:",e),this.mensaje="Error al conectar con el servidor.",this.exito=!1}},limpiarFormulario(){this.cliente={rut_ci:"",nombre:"",alias:"",telefono:"",whatsapp:"",mail:"",departamento:"",localidad:"",direccion:""}},goTo(e){this.$router.push({name:e})}},created(){this.cargarDepartamentos()}};const Ne=(0,l.A)(Se,[["render",Pe],["__scopeId","data-v-de26312c"]]);var Re=Ne;const Oe={class:"form-container"},Je=["value"],$e=["value"],qe=["value"],Ke={class:"buttons-container"};function Qe(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",Oe,[o[16]||(o[16]=(0,r.Lk)("h1",{class:"titulo"},"ORDENES",-1)),(0,r.Lk)("form",{onSubmit:o[8]||(o[8]=(0,t.D$)(((...e)=>s.guardarOrden&&s.guardarOrden(...e)),["prevent"]))},[o[10]||(o[10]=(0,r.Lk)("label",null,"Cliente",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>n.orden.cliente=e)},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.clientes,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.rut_ci,value:e.rut_ci},(0,f.v_)(e.nombre)+" ("+(0,f.v_)(e.rut_ci)+") ",9,Je)))),128))],512),[[t.u1,n.orden.cliente]]),o[11]||(o[11]=(0,r.Lk)("label",null,"División",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>n.orden.division=e),onChange:o[2]||(o[2]=(...e)=>s.cargarTipos&&s.cargarTipos(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.divisiones,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,$e)))),128))],544),[[t.u1,n.orden.division]]),o[12]||(o[12]=(0,r.Lk)("label",null,"Tipo",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[3]||(o[3]=e=>n.orden.tipo=e)},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.tipos,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,qe)))),128))],512),[[t.u1,n.orden.tipo]]),o[13]||(o[13]=(0,r.Lk)("label",null,"Descripción",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=e=>n.orden.descripcion=e)},null,512),[[t.Jo,n.orden.descripcion]]),o[14]||(o[14]=(0,r.Lk)("label",null,"Fecha inicio",-1)),(0,r.bo)((0,r.Lk)("input",{type:"date","onUpdate:modelValue":o[5]||(o[5]=e=>n.orden.fecha_inicio=e)},null,512),[[t.Jo,n.orden.fecha_inicio]]),o[15]||(o[15]=(0,r.Lk)("label",null,"Fecha fin",-1)),(0,r.bo)((0,r.Lk)("input",{type:"date","onUpdate:modelValue":o[6]||(o[6]=e=>n.orden.fecha_fin=e)},null,512),[[t.Jo,n.orden.fecha_fin]]),(0,r.Lk)("div",Ke,[o[9]||(o[9]=(0,r.Lk)("button",{class:"btn",type:"submit"},"GUARDAR",-1)),(0,r.Lk)("button",{onClick:o[7]||(o[7]=e=>s.goTo(s.menuDestino)),class:"btn"},(0,f.v_)(s.menuTexto),1)])],32),n.mensaje?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,f.C4)(["mensaje",n.exito?"exito":"error"])},(0,f.v_)(n.mensaje),3)):(0,r.Q3)("",!0)])}var He={data(){return{orden:{cliente:"",division:"",tipo:"",descripcion:"",fecha_inicio:"",fecha_fin:""},clientes:[],divisiones:[],tipos:[],mensaje:"",exito:!1,usuarioRol:localStorage.getItem("rol")||""}},computed:{menuTexto(){return"operario"===this.usuarioRol?"Intervención":"Menú"},menuDestino(){return"operario"===this.usuarioRol?"IntervencionOperario":"MenuPage"}},methods:{async cargarClientes(){try{const e=await j.A.get("https://control-taller-1a9d81bbc513.herokuapp.com/clientes");this.clientes=e.data}catch(e){console.error("Error al cargar clientes:",e)}},async cargarDivisiones(){try{const e=await j.A.get("https://control-taller-1a9d81bbc513.herokuapp.com/divisiones");this.divisiones=e.data.divisiones||e.data}catch(e){console.error("Error al cargar divisiones:",e)}},async cargarTipos(){if(this.orden.division)try{const e=await j.A.get(`https://control-taller-1a9d81bbc513.herokuapp.com/tipos_por_division/${encodeURIComponent(this.orden.division)}`);this.tipos=e.data.tipos||e.data}catch(e){console.error("Error al cargar tipos:",e)}},async guardarOrden(){try{const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/ordenes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.orden)});if(e.ok){const o=await e.json();this.mensaje=o.message,this.exito=!0,this.limpiarFormulario()}else{const o=await e.json();this.mensaje=o.message||"Error al guardar la orden.",this.exito=!1}}catch(e){console.error("Error:",e),this.mensaje="Error al conectar con el servidor.",this.exito=!1}},limpiarFormulario(){this.orden={cliente:"",division:"",tipo:"",descripcion:"",fecha_inicio:"",fecha_fin:""}},goTo(e){this.$router.push({name:e})}},mounted(){this.cargarClientes(),this.cargarDivisiones(),localStorage.getItem("access_token")||this.$router.push({name:"Login"})}};const We=(0,l.A)(He,[["render",Qe],["__scopeId","data-v-305c5611"]]);var Ge=We;const Be={class:"form-container"},ze=["value"],Ye=["value"],Ze=["value"],eo=["value"],oo={class:"buttons-container"};function ao(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",Be,[o[19]||(o[19]=(0,r.Lk)("h1",{class:"titulo"},"REGISTRAR INTERVENCIÓN",-1)),(0,r.Lk)("form",{onSubmit:o[10]||(o[10]=(0,t.D$)(((...e)=>s.guardarIntervencion&&s.guardarIntervencion(...e)),["prevent"]))},[o[12]||(o[12]=(0,r.Lk)("label",null,"Empleado",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>n.intervencion.empleado=e)},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.empleados,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.nombre},(0,f.v_)(e.nombre),9,ze)))),128))],512),[[t.u1,n.intervencion.empleado]]),o[13]||(o[13]=(0,r.Lk)("label",null,"División",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>n.intervencion.division=e),onChange:o[2]||(o[2]=(...e)=>s.cargarTipos&&s.cargarTipos(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.divisiones,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,Ye)))),128))],544),[[t.u1,n.intervencion.division]]),o[14]||(o[14]=(0,r.Lk)("label",null,"Tipo",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[3]||(o[3]=e=>n.intervencion.tipo=e),onChange:o[4]||(o[4]=(...e)=>s.cargarDescripciones&&s.cargarDescripciones(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.tipos,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,Ze)))),128))],544),[[t.u1,n.intervencion.tipo]]),o[15]||(o[15]=(0,r.Lk)("label",null,"Descripción",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[5]||(o[5]=e=>n.intervencion.descripcion=e)},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.descripciones,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,eo)))),128))],512),[[t.u1,n.intervencion.descripcion]]),o[16]||(o[16]=(0,r.Lk)("label",null,"Fecha",-1)),(0,r.bo)((0,r.Lk)("input",{type:"date","onUpdate:modelValue":o[6]||(o[6]=e=>n.intervencion.fecha=e)},null,512),[[t.Jo,n.intervencion.fecha]]),o[17]||(o[17]=(0,r.Lk)("label",null,"Hora Inicio",-1)),(0,r.bo)((0,r.Lk)("input",{type:"time","onUpdate:modelValue":o[7]||(o[7]=e=>n.intervencion.hora_inicio=e)},null,512),[[t.Jo,n.intervencion.hora_inicio]]),o[18]||(o[18]=(0,r.Lk)("label",null,"Hora Fin",-1)),(0,r.bo)((0,r.Lk)("input",{type:"time","onUpdate:modelValue":o[8]||(o[8]=e=>n.intervencion.hora_fin=e)},null,512),[[t.Jo,n.intervencion.hora_fin]]),(0,r.Lk)("div",oo,[o[11]||(o[11]=(0,r.Lk)("button",{class:"btn",type:"submit"},"GUARDAR",-1)),(0,r.Lk)("button",{onClick:o[9]||(o[9]=e=>s.goTo("MenuPage")),class:"btn"},"Menú")])],32),n.mensaje?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,f.C4)(["mensaje",n.exito?"exito":"error"])},(0,f.v_)(n.mensaje),3)):(0,r.Q3)("",!0)])}var to={data(){return{intervencion:{empleado:"",division:"",tipo:"",descripcion:"",fecha:"",hora_inicio:"",hora_fin:""},empleados:[],divisiones:[],tipos:[],descripciones:[],mensaje:"",exito:!1}},methods:{async cargarEmpleados(){try{const e=await j.A.get("https://control-taller-1a9d81bbc513.herokuapp.com/obtener_empleados");this.empleados=e.data,console.log("Lista de empleados:",this.empleados)}catch(e){console.error("Error al cargar empleados:",e)}},async cargarDivisiones(){try{const e=await j.A.get("https://control-taller-1a9d81bbc513.herokuapp.com/divisiones");this.divisiones=e.data.divisiones||e.data}catch(e){console.error("Error al cargar divisiones:",e)}},async cargarTipos(){if(this.intervencion.division)try{const e=await j.A.get(`https://control-taller-1a9d81bbc513.herokuapp.com/tipos_por_division/${encodeURIComponent(this.intervencion.division)}`);this.tipos=e.data.tipos||e.data}catch(e){console.error("Error al cargar tipos:",e)}},cargarDescripciones(){this.intervencion.tipo?j.A.get(`https://control-taller-1a9d81bbc513.herokuapp.com/descripcion_por_tipo/${this.intervencion.tipo}`).then((e=>{console.log("Datos recibidos:",e.data),this.descripciones=e.data})).catch((e=>{console.error("Error al cargar descripciones:",e)})):console.warn("El tipo de intervención está vacío")},async guardarIntervencion(){console.log("Datos enviados:",this.intervencion);try{const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/intervenciones",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.intervencion)});if(e.ok){const o=await e.json();this.mensaje=o.message,this.exito=!0,this.limpiarFormulario()}else{const o=await e.json();this.mensaje=o.message||"Error al guardar la intervención.",this.exito=!1}}catch(e){console.error("Error:",e),this.mensaje="Error al conectar con el servidor.",this.exito=!1}},limpiarFormulario(){this.intervencion={empleado:"",division:"",tipo:"",descripcion:"",fecha:"",hora_inicio:"",hora_fin:""}},goTo(e){this.$router.push({name:e})}},mounted(){this.cargarEmpleados(),this.cargarDivisiones()}};const ro=(0,l.A)(to,[["render",ao],["__scopeId","data-v-76f33882"]]);var io=ro;const no={class:"form-container"},so=["value"],lo=["value"],co=["value"],uo={class:"buttons-container"},po={key:0},mo={key:1},ho={class:"buttons-container"},vo={class:"buttons-container"};function bo(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",no,[o[22]||(o[22]=(0,r.Lk)("h1",{class:"titulo"},"INTERVENCIÓN",-1)),o[23]||(o[23]=(0,r.Lk)("label",null,"Operario",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>n.intervencion.empleado=e),disabled:""},null,512),[[t.Jo,n.intervencion.empleado]]),o[24]||(o[24]=(0,r.Lk)("label",{for:"division"},"División",-1)),(0,r.bo)((0,r.Lk)("select",{id:"division","onUpdate:modelValue":o[1]||(o[1]=e=>n.intervencion.division=e),onChange:o[2]||(o[2]=e=>{s.cargarTipos(),s.limpiarMensaje()})},[o[15]||(o[15]=(0,r.Lk)("option",{value:""},"Seleccione una división",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.divisiones,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,so)))),128))],544),[[t.u1,n.intervencion.division]]),o[25]||(o[25]=(0,r.Lk)("label",{for:"tipo"},"Tipo",-1)),(0,r.bo)((0,r.Lk)("select",{id:"tipo","onUpdate:modelValue":o[3]||(o[3]=e=>n.intervencion.tipo=e),onChange:o[4]||(o[4]=e=>{s.cargarDescripciones(),s.limpiarMensaje()})},[o[16]||(o[16]=(0,r.Lk)("option",{value:""},"Seleccione un tipo",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.tipos,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,lo)))),128))],544),[[t.u1,n.intervencion.tipo]]),o[26]||(o[26]=(0,r.Lk)("label",{for:"descripcion"},"Descripción",-1)),(0,r.bo)((0,r.Lk)("select",{id:"descripcion","onUpdate:modelValue":o[5]||(o[5]=e=>n.intervencion.descripcion=e),onChange:o[6]||(o[6]=(...e)=>s.limpiarMensaje&&s.limpiarMensaje(...e))},[o[17]||(o[17]=(0,r.Lk)("option",{value:""},"Seleccione una descripción",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.descripciones,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,co)))),128))],544),[[t.u1,n.intervencion.descripcion]]),(0,r.Lk)("div",uo,[(0,r.Lk)("button",{onClick:o[7]||(o[7]=e=>s.goTo("OrdenesForm")),class:"btn btn-red"},"Nueva Orden")]),n.mostrandoIntervencion?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",po,[(0,r.Lk)("button",{class:"btn btn-red",onClick:o[8]||(o[8]=e=>{s.iniciarIntervencion(),s.limpiarMensaje()})},"Inicio intervención")])),n.mostrandoIntervencion?((0,r.uX)(),(0,r.CE)("div",mo,[o[18]||(o[18]=(0,r.Lk)("label",{for:"fecha"},"Fecha",-1)),(0,r.bo)((0,r.Lk)("input",{id:"fecha",type:"text","onUpdate:modelValue":o[9]||(o[9]=e=>n.intervencion.fecha=e),disabled:""},null,512),[[t.Jo,n.intervencion.fecha]]),o[19]||(o[19]=(0,r.Lk)("label",{for:"hora-inicio"},"Hora inicio",-1)),(0,r.bo)((0,r.Lk)("input",{id:"hora-inicio",type:"text","onUpdate:modelValue":o[10]||(o[10]=e=>n.intervencion.hora_inicio=e),disabled:""},null,512),[[t.Jo,n.intervencion.hora_inicio]]),(0,r.Lk)("div",ho,[(0,r.Lk)("button",{class:"btn btn-red",onClick:o[11]||(o[11]=(...e)=>s.finalizarIntervencion&&s.finalizarIntervencion(...e))},"Finalizar Intervención")]),o[20]||(o[20]=(0,r.Lk)("label",{for:"hora-fin"},"Hora fin",-1)),(0,r.bo)((0,r.Lk)("input",{id:"hora-fin",type:"text","onUpdate:modelValue":o[12]||(o[12]=e=>n.intervencion.hora_fin=e),disabled:""},null,512),[[t.Jo,n.intervencion.hora_fin]])])):(0,r.Q3)("",!0),n.mensaje?((0,r.uX)(),(0,r.CE)("div",{key:2,class:(0,f.C4)(["mensaje",n.exito?"mensaje-exito":"mensaje-error"])},(0,f.v_)(n.mensaje),3)):(0,r.Q3)("",!0),(0,r.Lk)("div",vo,[(0,r.Lk)("button",{class:"btn",onClick:o[13]||(o[13]=(...e)=>s.nuevaIntervencion&&s.nuevaIntervencion(...e))},"Nueva intervención"),(0,r.Lk)("button",{class:"btn",onClick:o[14]||(o[14]=(...e)=>s.confirmarCerrarSesion&&s.confirmarCerrarSesion(...e))},"Cerrar sesión"),o[21]||(o[21]=(0,r.Lk)("button",{class:"btn"},"Cambiar Contraseña",-1))])])}var ko={data(){return{empleados:[],divisiones:[],tipos:[],descripciones:[],intervencion:{empleado:"",division:"",tipo:"",descripcion:"",fecha:"",hora_inicio:"",hora_fin:""},ultimaIntervencion:{division:"",tipo:"",descripcion:""},mensaje:"",exito:!1,mostrandoIntervencion:!1}},methods:{async cargarEmpleados(){try{const e=localStorage.getItem("cedula");if(!e)return void(this.intervencion.empleado="Cédula no disponible");this.intervencion.empleado=e}catch(e){console.error("Error al cargar empleados:",e)}},async cargarDivisiones(){try{const e=await j.A.get("https://control-taller-1a9d81bbc513.herokuapp.com/divisiones");this.divisiones=e.data}catch(e){console.error("Error al cargar divisiones:",e)}},async cargarTipos(){if(this.intervencion.division)try{const e=await j.A.get(`https://control-taller-1a9d81bbc513.herokuapp.com/tipos_por_division/${encodeURIComponent(this.intervencion.division)}`);this.tipos=e.data}catch(e){console.error("Error al cargar tipos:",e)}},async cargarDescripciones(){if(this.intervencion.tipo)try{const e=await j.A.get(`https://control-taller-1a9d81bbc513.herokuapp.com/descripcion_por_tipo/${this.intervencion.tipo}`);this.descripciones=e.data}catch(e){console.error("Error al cargar descripciones:",e)}},async guardarIntervencion(){const e=localStorage.getItem("access_token")||"";if(!e)return this.mensaje="Error: No tienes una sesión activa.",void(this.exito=!1);try{if(!this.intervencion.hora_fin)return;await j.A.post("https://control-taller-1a9d81bbc513.herokuapp.com/intervenciones",this.intervencion,{headers:{Authorization:`Bearer ${e}`}}),this.mensaje="Intervención guardada correctamente.",this.exito=!0}catch(o){this.mensaje=o.response?.data?.error||"Error en el servidor.",this.exito=!1}},iniciarIntervencion(){const e=new Date;this.intervencion.fecha=e.toISOString().split("T")[0],this.intervencion.hora_inicio=e.toLocaleTimeString("es-ES",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.mostrandoIntervencion=!0,this.guardarIntervencion()},finalizarIntervencion(){this.intervencion.hora_fin=(new Date).toLocaleTimeString("es-ES",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.ultimaIntervencion={division:this.intervencion.division,tipo:this.intervencion.tipo,descripcion:this.intervencion.descripcion},this.guardarIntervencion()},async nuevaIntervencion(){this.mostrandoIntervencion&&this.intervencion.hora_inicio&&!this.intervencion.hora_fin&&(this.intervencion.hora_fin=(new Date).toLocaleTimeString("es-ES",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})),this.intervencion={empleado:this.intervencion.empleado,division:this.ultimaIntervencion.division||"",tipo:this.ultimaIntervencion.tipo||"",descripcion:this.ultimaIntervencion.descripcion||"",fecha:"",hora_inicio:"",hora_fin:""},this.mostrandoIntervencion=!1},limpiarMensaje(){this.mensaje=""},confirmarCerrarSesion(){window.confirm("¿Seguro que quieres cerrar sesión?")&&(localStorage.removeItem("access_token"),this.$router.push("/"))},goTo(e){this.$router.push({name:e})}},mounted(){this.cargarEmpleados(),this.cargarDivisiones(),localStorage.getItem("access_token")||this.$router.push({name:"Login"})}};const fo=(0,l.A)(ko,[["render",bo],["__scopeId","data-v-607822a3"]]);var Lo=fo;const go={class:"form-container"},Co={class:"proveedor-container"},_o={key:0,class:"dropdown"},yo=["onMousedown"],Eo={key:1,class:"confirmacion"},wo=["disabled"],jo={class:"material-container"},Mo={key:2,class:"dropdown"},Io=["onMousedown"],To={class:"button-container"},Do={key:3},Uo={key:4},xo={class:"table-materiales"},Ao=["onUpdate:modelValue"],Fo=["onUpdate:modelValue","onChange"],Xo=["value"],Vo=["onUpdate:modelValue","onChange"],Po=["value"],So=["onUpdate:modelValue"],No=["value"];function Ro(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",go,[o[32]||(o[32]=(0,r.Lk)("div",{class:"titulo"},"COMPRAS",-1)),o[33]||(o[33]=(0,r.Lk)("label",null,"Proveedor",-1)),(0,r.Lk)("div",Co,[(0,r.bo)((0,r.Lk)("input",{type:"text",ref:"proveedorInput","onUpdate:modelValue":o[0]||(o[0]=e=>n.searchProveedor=e),onInput:o[1]||(o[1]=(...e)=>s.filterProveedores&&s.filterProveedores(...e)),onFocus:o[2]||(o[2]=(...e)=>s.handleProveedorFocus&&s.handleProveedorFocus(...e)),placeholder:"Escriba para buscar..."},null,544),[[t.Jo,n.searchProveedor]]),(0,r.Lk)("button",{class:"btn-nuevo",onClick:o[3]||(o[3]=e=>n.mostrarConfirmacion=!0)},"Nuevo")]),n.showDropdown&&n.filteredProveedores.length?((0,r.uX)(),(0,r.CE)("ul",_o,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredProveedores,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.rut_ci,onMousedown:o=>s.selectProveedor(e)},(0,f.v_)(e.nombre)+" - "+(0,f.v_)(e.rut_ci),41,yo)))),128))])):(0,r.Q3)("",!0),n.mostrarConfirmacion?((0,r.uX)(),(0,r.CE)("div",Eo,[o[25]||(o[25]=(0,r.Lk)("p",null,"¿Crear un nuevo proveedor?",-1)),(0,r.Lk)("button",{onClick:o[4]||(o[4]=(...e)=>s.irAProveedorForm&&s.irAProveedorForm(...e))},"Crear"),(0,r.Lk)("button",{onClick:o[5]||(o[5]=e=>n.mostrarConfirmacion=!1)},"Cancelar")])):(0,r.Q3)("",!0),o[34]||(o[34]=(0,r.Lk)("label",null,"Nro de factura",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=e=>n.compra.numero_factura=e)},null,512),[[t.Jo,n.compra.numero_factura]]),o[35]||(o[35]=(0,r.Lk)("label",null,"Fecha",-1)),(0,r.bo)((0,r.Lk)("input",{type:"date","onUpdate:modelValue":o[7]||(o[7]=e=>n.compra.fecha=e)},null,512),[[t.Jo,n.compra.fecha]]),o[36]||(o[36]=(0,r.Lk)("label",null,"Moneda",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[8]||(o[8]=e=>n.compra.moneda=e)},o[26]||(o[26]=[(0,r.Lk)("option",{value:"USD"},"USD",-1),(0,r.Lk)("option",{value:"UYU"},"UYU",-1)]),512),[[t.u1,n.compra.moneda]]),o[37]||(o[37]=(0,r.Lk)("label",null,"Importe",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":o[9]||(o[9]=e=>n.compra.importe=e)},null,512),[[t.Jo,n.compra.importe]]),o[38]||(o[38]=(0,r.Lk)("label",null,"Tipo de IVA",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o[10]||(o[10]=e=>n.compra.tipo_iva=e)},o[27]||(o[27]=[(0,r.Lk)("option",null,"Básico",-1),(0,r.Lk)("option",null,"Mínimo",-1),(0,r.Lk)("option",null,"Exento",-1)]),512),[[t.u1,n.compra.tipo_iva]]),o[39]||(o[39]=(0,r.Lk)("label",null,"Tipo de cambio",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":o[11]||(o[11]=e=>n.compra.tipo_cambio=e),disabled:"UYU"===n.compra.moneda},null,8,wo),[[t.Jo,n.compra.tipo_cambio]]),o[40]||(o[40]=(0,r.Lk)("label",null,"Importe pesos",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":o[12]||(o[12]=e=>n.compra.importe_pesos=e),disabled:""},null,512),[[t.Jo,n.compra.importe_pesos]]),o[41]||(o[41]=(0,r.Lk)("label",{for:"material"},"Materiales",-1)),(0,r.Lk)("div",jo,[(0,r.bo)((0,r.Lk)("input",{type:"text",ref:"materialInput","onUpdate:modelValue":o[13]||(o[13]=e=>n.searchMaterial=e),onInput:o[14]||(o[14]=(...e)=>s.filterMateriales&&s.filterMateriales(...e)),onFocus:o[15]||(o[15]=(...e)=>s.showAllMateriales&&s.showAllMateriales(...e)),onBlur:o[16]||(o[16]=(...e)=>s.handleBlurMaterial&&s.handleBlurMaterial(...e)),placeholder:"Escriba para buscar material..."},null,544),[[t.Jo,n.searchMaterial]])]),n.showDropdownMaterial&&n.filteredMateriales.length?((0,r.uX)(),(0,r.CE)("ul",Mo,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredMateriales,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e,onMousedown:(0,t.D$)((o=>s.selectMaterial(e)),["prevent"])},(0,f.v_)(e),41,Io)))),128))])):(0,r.Q3)("",!0),(0,r.Lk)("div",To,[(0,r.Lk)("button",{class:"btn btn-primary",onClick:o[17]||(o[17]=(...e)=>s.agregarMaterial&&s.agregarMaterial(...e))},"Agregar Material"),(0,r.Lk)("button",{class:"btn btn-secondary",onClick:o[18]||(o[18]=(...e)=>s.crearNuevoMaterial&&s.crearNuevoMaterial(...e))},"Crear Nuevo Material"),(0,r.Lk)("button",{onClick:o[19]||(o[19]=e=>s.goTo("MenuPage")),class:"btn"},"Menú")]),n.mostrarCampo?((0,r.uX)(),(0,r.CE)("div",Do,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[20]||(o[20]=e=>n.nuevoMaterial=e),placeholder:"Nombre del material"},null,512),[[t.Jo,n.nuevoMaterial]]),(0,r.Lk)("button",{class:"btn btn-secondary",onClick:o[21]||(o[21]=(...e)=>s.agregarNuevoMaterial&&s.agregarNuevoMaterial(...e))},"Crear")])):(0,r.Q3)("",!0),n.materialesAgregados&&n.materialesAgregados.length?((0,r.uX)(),(0,r.CE)("div",Uo,[(0,r.Lk)("table",xo,[o[31]||(o[31]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Material"),(0,r.Lk)("th",null,"Importe"),(0,r.Lk)("th",null,"División"),(0,r.Lk)("th",null,"Tipo"),(0,r.Lk)("th",null,"Descripción"),(0,r.Lk)("th",null,"Número de Factura")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.materialesAgregados,((e,a)=>((0,r.uX)(),(0,r.CE)("tr",{key:a},[(0,r.Lk)("td",null,(0,f.v_)(e.nombre),1),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o=>e.precio=o,type:"number"},null,8,Ao),[[t.Jo,e.precio]])]),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o=>e.division=o,onChange:e=>s.cargarTipos(a)},[o[28]||(o[28]=(0,r.Lk)("option",{value:"",disabled:""},"Seleccione",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.divisiones,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,Xo)))),128))],40,Fo),[[t.u1,e.division]])]),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o=>e.tipo=o,onChange:e=>s.cargarDescripciones(a)},[o[29]||(o[29]=(0,r.Lk)("option",{value:"",disabled:""},"Seleccione",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.tipos,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,Po)))),128))],40,Vo),[[t.u1,e.tipo]])]),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o=>e.descripcion=o},[o[30]||(o[30]=(0,r.Lk)("option",{value:"",disabled:""},"Seleccione",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.descripciones,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,No)))),128))],8,So),[[t.u1,e.descripcion]])]),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[22]||(o[22]=e=>n.compra.numero_factura=e),type:"text",disabled:""},null,512),[[t.Jo,n.compra.numero_factura]])])])))),128))])]),(0,r.Lk)("button",{class:"btn",onClick:o[23]||(o[23]=(...e)=>s.guardarCompra&&s.guardarCompra(...e))},"Guardar Todo"),(0,r.Lk)("button",{onClick:o[24]||(o[24]=e=>s.goTo("MenuPage")),class:"btn"},"Menú"),n.mensajeEstado?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,f.C4)(["mensaje",n.tipoMensaje])},(0,f.v_)(n.mensajeEstado),3)):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0)])}a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698),a(8992),a(4520);var Oo={data(){return{compra:{proveedor_rut_ci:"",numero_factura:"",fecha:"",moneda:"",importe:"",tipo_iva:"",tipo_cambio:1,importe_pesos:"",materiales:[]},materialSeleccionado:"",materialesAgregados:[],materiales:[],searchProveedor:"",proveedores:[],filteredProveedores:[],showDropdown:!1,mostrarConfirmacion:!1,mostrarCampo:!1,mensajeEstado:"",tipoMensaje:"",nuevoMaterial:"",listaMateriales:[],numeroFactura:"",searchMaterial:"",filteredMateriales:[],showDropdownMaterial:!1,bloqueandoDropdownProveedor:!1}},watch:{"compra.moneda"(e){"UYU"===e?(this.compra.tipo_cambio=1,this.compra.importe_pesos=this.compra.importe):"USD"===e&&(this.compra.tipo_cambio=null,this.compra.importe_pesos=this.compra.importe*(this.compra.tipo_cambio||0))},"compra.importe"(e){"UYU"===this.compra.moneda?this.compra.importe_pesos=e:"USD"===this.compra.moneda&&(this.compra.importe_pesos=e*(this.compra.tipo_cambio||0))},"compra.tipo_cambio"(e){"USD"===this.compra.moneda&&(this.compra.importe_pesos=this.compra.importe*(e||0))}},methods:{async fetchProveedores(){try{const e=await j.A.get("https://control-taller-1a9d81bbc513.herokuapp.com/proveedores");this.proveedores=e.data,this.filteredProveedores=this.proveedores}catch(e){console.error("Error obteniendo proveedores:",e)}},handleProveedorFocus(){this.bloqueandoDropdownProveedor||(this.showDropdown=!0)},filterProveedores(){this.searchProveedor?this.filteredProveedores=this.proveedores.filter((e=>e.nombre.toLowerCase().includes(this.searchProveedor.toLowerCase())||String(e.rut_ci).toLowerCase().includes(this.searchProveedor.toLowerCase()))):this.filteredProveedores=this.proveedores,this.showDropdown=!0},selectProveedor(e){this.searchProveedor=`${e.nombre} - ${e.rut_ci}`,this.compra.proveedor_rut_ci=e.rut_ci,this.showDropdown=!1},hideDropdown(){setTimeout((()=>{this.showDropdown=!1}),200)},irAProveedorForm(){this.$router.push("/proveedor-form")},async obtenerMateriales(){try{const e=await j.A.get("https://control-taller-1a9d81bbc513.herokuapp.com/materiales-nombres");if(!e.data||!Array.isArray(e.data))return void console.error("Respuesta inesperada de materiales:",e.data);this.materiales=[...new Set(e.data)],console.log("Materiales cargados correctamente:",this.materiales)}catch(e){console.error("Error obteniendo materiales:",e)}},showAllMateriales(){this.filteredMateriales=this.materiales,this.showDropdownMaterial=!0,console.log("Material dropdown activado")},filterMateriales(){this.searchMaterial?this.filteredMateriales=this.materiales.filter((e=>e.toLowerCase().includes(this.searchMaterial.toLowerCase()))):this.filteredMateriales=this.materiales,this.showDropdownMaterial=!0},selectMaterial(e){this.bloqueandoDropdownProveedor=!0,this.searchMaterial=e,this.showDropdownMaterial=!1,setTimeout((()=>document.querySelector("input").focus()),0),setTimeout((()=>{this.$refs.materialInput?.focus()}),0)},hideDropdownMaterial(){setTimeout((()=>{this.showDropdownMaterial=!1}),200)},handleBlurMaterial(){setTimeout((()=>{this.searchMaterial&&!this.materiales.includes(this.searchMaterial)&&(this.searchMaterial=""),this.showDropdownMaterial=!1}),200)},agregarMaterial(){if(!this.materiales.includes(this.searchMaterial))return void alert("Seleccione un material válido.");console.log("Material agregado:",this.searchMaterial);const e={nombre:this.searchMaterial,precio:"",division:"",tipo:"",descripcion:"",divisiones:[],tipos:[],descripciones:[]};this.materialesAgregados.push(e),this.cargarDivisiones(this.materialesAgregados.length-1)},crearNuevoMaterial(){this.mostrarCampo=!0},agregarNuevoMaterial(){if(""!==this.nuevoMaterial.trim()){const e={nombre:this.nuevoMaterial,precio:"",division:"",tipo:"",descripcion:"",divisiones:[],tipos:[],descripciones:[]};this.materiales.push(this.nuevoMaterial),this.materialesAgregados.push(e),this.cargarDivisiones(this.materialesAgregados.length-1),this.nuevoMaterial="",this.mostrarCampo=!1}},async cargarDivisiones(e){try{const o=await j.A.get("https://control-taller-1a9d81bbc513.herokuapp.com/divisiones");this.materialesAgregados[e].divisiones=o.data.divisiones||o.data}catch(o){console.error("Error al cargar divisiones:",o)}},async cargarTipos(e){if(this.materialesAgregados[e].division)try{const o=await j.A.get(`https://control-taller-1a9d81bbc513.herokuapp.com/tipos_por_division/${encodeURIComponent(this.materialesAgregados[e].division)}`);this.materialesAgregados[e].tipos=o.data.tipos||o.data}catch(o){console.error("Error al cargar tipos:",o)}},async cargarDescripciones(e){if(this.materialesAgregados[e].tipo)try{const o=await j.A.get(`https://control-taller-1a9d81bbc513.herokuapp.com/descripcion_por_tipo/${encodeURIComponent(this.materialesAgregados[e].tipo)}`);this.materialesAgregados[e].descripciones=o.data}catch(o){console.error("Error al cargar descripciones:",o)}else console.warn("El tipo de material está vacío")},async guardarCompra(){if(!this.validarCompra())return;const e={proveedor_rut_ci:this.compra.proveedor_rut_ci,numero_factura:this.compra.numero_factura,fecha:this.compra.fecha,moneda:this.compra.moneda,importe:this.compra.importe,tipo_iva:this.compra.tipo_iva,tipo_cambio:this.compra.tipo_cambio,importe_pesos:this.compra.importe_pesos,materiales:this.materialesAgregados};try{const o=await j.A.post("https://control-taller-1a9d81bbc513.herokuapp.com/compras",e);this.mensajeEstado=o.data.message,this.tipoMensaje="exito",setTimeout((()=>{this.mensajeEstado=""}),3e3),setTimeout((()=>{this.limpiarFormulario()}),2e3)}catch(o){this.mensajeEstado=o.response?.data?.error||"Error al guardar la compra",this.tipoMensaje="error"}},validarCompra(){return this.compra.proveedor_rut_ci&&this.compra.numero_factura&&this.compra.fecha&&this.compra.importe?!!this.materialesAgregados.length||(this.mostrarMensaje("Debe agregar al menos un material","error"),!1):(this.mostrarMensaje("Todos los campos de la compra son obligatorios","error"),!1)},mostrarMensaje(e,o){this.mensajeEstado=e,this.tipoMensaje=o,setTimeout((()=>{this.mensajeEstado="",this.tipoMensaje=""}),3e3)},limpiarFormulario(){this.compra={proveedor_rut_ci:"",numero_factura:"",fecha:"",moneda:"",importe:"",tipo_iva:"",tipo_cambio:1,importe_pesos:""},this.materialesAgregados=[],this.searchProveedor=""},goTo(e){this.$router.push({name:e})}},mounted(){this.fetchProveedores(),this.obtenerMateriales(),console.log("Materiales cargados:",this.materiales)}};const Jo=(0,l.A)(Oo,[["render",Ro],["__scopeId","data-v-07be3385"]]);var $o=Jo;const qo={class:"parametros-container"},Ko={key:0},Qo={class:"parametro"},Ho=["disabled"],Wo={class:"parametro"},Go=["disabled"],Bo={class:"botones"};function zo(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",qo,[o[14]||(o[14]=(0,r.Lk)("h1",{class:"titulo"},"Parámetros",-1)),n.mensaje.texto?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,f.C4)(["mensaje",n.mensaje.tipo])},[(0,r.eW)((0,f.v_)(n.mensaje.texto)+" ",1),"confirmacion"===n.mensaje.tipo?((0,r.uX)(),(0,r.CE)("div",Ko,[(0,r.Lk)("button",{onClick:o[0]||(o[0]=e=>s.guardarConfiguracion(n.mensaje.clave))},"Aceptar"),(0,r.Lk)("button",{onClick:o[1]||(o[1]=e=>s.cancelarConfirmacion(n.mensaje.clave))},"Cancelar")])):(0,r.Q3)("",!0)],2)):(0,r.Q3)("",!0),(0,r.Lk)("div",Qo,[o[12]||(o[12]=(0,r.Lk)("label",null,"Factor fijo",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=e=>n.configuraciones.factor_fijo=e),onInput:o[3]||(o[3]=e=>s.validarNumero("factor_fijo")),disabled:!n.editando.factor_fijo},null,40,Ho),[[t.Jo,n.configuraciones.factor_fijo]]),n.editando.factor_fijo?((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:o[5]||(o[5]=e=>s.confirmarGuardado("factor_fijo"))},"Guardar")):((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:o[4]||(o[4]=e=>s.iniciarEdicion("factor_fijo"))},"Editar"))]),(0,r.Lk)("div",Wo,[o[13]||(o[13]=(0,r.Lk)("label",null,"Costo fijo por hora",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=e=>n.configuraciones.costo_fijo_por_hora=e),onInput:o[7]||(o[7]=e=>s.validarNumero("costo_fijo_por_hora")),disabled:!n.editando.costo_fijo_por_hora},null,40,Go),[[t.Jo,n.configuraciones.costo_fijo_por_hora]]),n.editando.costo_fijo_por_hora?((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:o[9]||(o[9]=e=>s.confirmarGuardado("costo_fijo_por_hora"))},"Guardar")):((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:o[8]||(o[8]=e=>s.iniciarEdicion("costo_fijo_por_hora"))},"Editar"))]),(0,r.Lk)("div",Bo,[(0,r.Lk)("button",{onClick:o[10]||(o[10]=e=>s.goTo("MenuPage")),class:"botones"},"Menú"),(0,r.Lk)("button",{onClick:o[11]||(o[11]=e=>s.goTo("ConsultaCostosPorOrden")),class:"botones"},"Costos por orden")])])}var Yo={data(){return{configuraciones:{},valoresAnteriores:{},editando:{factor_fijo:!1,costo_fijo_por_hora:!1},mensaje:{texto:"",tipo:"",clave:""}}},mounted(){this.obtenerConfiguraciones()},methods:{async obtenerConfiguraciones(){try{const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/configuraciones"),o=await e.json();if(o.error)return void this.mostrarMensaje("Error al obtener configuraciones","error");this.configuraciones=o}catch(e){this.mostrarMensaje("Error en la solicitud","error")}},iniciarEdicion(e){this.valoresAnteriores[e]=this.configuraciones[e],this.editando[e]=!0},confirmarGuardado(e){this.mensaje={texto:`¿Seguro desea editar el ${e.replace("_"," ")}?`,tipo:"confirmacion",clave:e}},async guardarConfiguracion(e){try{const o=this.configuraciones[e];if(isNaN(o)||""===o)return void this.mostrarMensaje("El valor debe ser numérico","error");const a=await fetch(`https://control-taller-1a9d81bbc513.herokuapp.com/configuraciones/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({valor:o})}),t=await a.json();t.error?this.mostrarMensaje("Error al actualizar: "+t.error,"error"):(this.mostrarMensaje("Configuración actualizada con éxito","exito"),this.editando[e]=!1)}catch(o){this.mostrarMensaje("Error en la solicitud: "+o.message,"error")}},cancelarConfirmacion(e){this.configuraciones[e]=this.valoresAnteriores[e],this.editando[e]=!1,this.mensaje={texto:"",tipo:"",clave:""}},validarNumero(e){this.configuraciones[e]=this.configuraciones[e].replace(/[^0-9.]/g,"")},goTo(e){this.$router.push({name:e})},mostrarMensaje(e,o,a=""){this.mensaje={texto:e,tipo:o,clave:a},"confirmacion"!==o&&setTimeout((()=>{this.mensaje.texto=""}),3e3)}}};const Zo=(0,l.A)(Yo,[["render",zo],["__scopeId","data-v-7754fe4f"]]);var ea=Zo;const oa={class:"empleados-container"},aa={class:"empleados-tabla"},ta={class:"menu-boton-container"};function ra(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",oa,[o[3]||(o[3]=(0,r.Lk)("h1",{class:"titulo"},"Lista de Empleados",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>n.filtroNombre=e),placeholder:"Buscar por nombre...",class:"busqueda"},null,512),[[t.Jo,n.filtroNombre]]),(0,r.Lk)("table",aa,[o[2]||(o[2]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Cédula"),(0,r.Lk)("th",null,"Nombre"),(0,r.Lk)("th",null,"Dirección"),(0,r.Lk)("th",null,"Celular"),(0,r.Lk)("th",null,"Remuneración"),(0,r.Lk)("th",null,"Factor"),(0,r.Lk)("th",null,"Fecha Vencimiento Carnet")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.empleadosFiltrados,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.cedula},[(0,r.Lk)("td",null,(0,f.v_)(e.cedula),1),(0,r.Lk)("td",null,(0,f.v_)(e.nombre),1),(0,r.Lk)("td",null,(0,f.v_)(e.direccion),1),(0,r.Lk)("td",null,(0,f.v_)(e.celular),1),(0,r.Lk)("td",null,(0,f.v_)(e.remuneracion),1),(0,r.Lk)("td",null,(0,f.v_)(e.factor),1),(0,r.Lk)("td",null,(0,f.v_)(s.formatearFecha(e.fecha_vencimiento_carnet)),1)])))),128))])]),(0,r.Lk)("div",ta,[(0,r.Lk)("button",{onClick:o[1]||(o[1]=e=>s.goTo("MenuPage")),class:"menu-boton"},"Menú")])])}var ia={data(){return{empleados:[],filtroNombre:""}},computed:{empleadosFiltrados(){return this.empleados.filter((e=>{const o=e.nombre?e.nombre.toLowerCase():"";return o.includes(this.filtroNombre.toLowerCase())}))}},mounted(){this.obtenerEmpleados()},methods:{async obtenerEmpleados(){try{const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/get_empleado");this.empleados=await e.json()}catch(e){console.error("Error al obtener empleados:",e)}},formatearFecha(e){const o={day:"2-digit",month:"2-digit",year:"numeric"};return new Date(e).toLocaleDateString("es-ES",o)},goTo(e){this.$router.push({name:e})}}};const na=(0,l.A)(ia,[["render",ra],["__scopeId","data-v-66041eb3"]]);var sa=na;const la={class:"clientes-container"},ca={class:"clientes-tabla"},da={class:"menu-boton-container"};function ua(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",la,[o[3]||(o[3]=(0,r.Lk)("h1",{class:"titulo"},"Lista de Clientes",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>n.filtroNombre=e),placeholder:"Buscar por nombre...",class:"busqueda"},null,512),[[t.Jo,n.filtroNombre]]),(0,r.Lk)("table",ca,[o[2]||(o[2]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"RUT/CI"),(0,r.Lk)("th",null,"Nombre"),(0,r.Lk)("th",null,"Alias"),(0,r.Lk)("th",null,"Teléfono"),(0,r.Lk)("th",null,"Whatsapp"),(0,r.Lk)("th",null,"Mail"),(0,r.Lk)("th",null,"Dirección"),(0,r.Lk)("th",null,"Localidad"),(0,r.Lk)("th",null,"Departamento")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.clientesFiltrados,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.rut_ci},[(0,r.Lk)("td",null,(0,f.v_)(e.rut_ci),1),(0,r.Lk)("td",null,(0,f.v_)(e.nombre),1),(0,r.Lk)("td",null,(0,f.v_)(e.alias),1),(0,r.Lk)("td",null,(0,f.v_)(e.telefono),1),(0,r.Lk)("td",null,(0,f.v_)(e.whatsapp),1),(0,r.Lk)("td",null,(0,f.v_)(e.mail),1),(0,r.Lk)("td",null,(0,f.v_)(e.direccion),1),(0,r.Lk)("td",null,(0,f.v_)(e.localidad_nombre),1),(0,r.Lk)("td",null,(0,f.v_)(e.departamento_nombre),1)])))),128))])]),(0,r.Lk)("div",da,[(0,r.Lk)("button",{onClick:o[1]||(o[1]=e=>s.goTo("MenuPage")),class:"menu-boton"},"Menú")])])}var pa={data(){return{clientes:[],filtroNombre:""}},computed:{clientesFiltrados(){return this.clientes.filter((e=>{const o=e.nombre?e.nombre.toLowerCase():"";return o.includes(this.filtroNombre.toLowerCase())}))}},mounted(){this.obtenerClientes()},methods:{async obtenerClientes(){try{const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/get_cliente");this.clientes=await e.json()}catch(e){console.error("Error al obtener empleados:",e)}},goTo(e){this.$router.push({name:e})}}};const ma=(0,l.A)(pa,[["render",ua],["__scopeId","data-v-af220400"]]);var ha=ma;const va={class:"proveedores-container"},ba={class:"proveedores-tabla"},ka={class:"menu-boton-container"};function fa(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",va,[o[3]||(o[3]=(0,r.Lk)("h1",{class:"titulo"},"Lista de Proveedores",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>n.filtroNombre=e),placeholder:"Buscar por nombre...",class:"busqueda"},null,512),[[t.Jo,n.filtroNombre]]),(0,r.Lk)("table",ba,[o[2]||(o[2]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"RUT/CI"),(0,r.Lk)("th",null,"Nombre"),(0,r.Lk)("th",null,"Alias"),(0,r.Lk)("th",null,"Teléfono"),(0,r.Lk)("th",null,"Whatsapp"),(0,r.Lk)("th",null,"Mail"),(0,r.Lk)("th",null,"Rubro"),(0,r.Lk)("th",null,"Dirección"),(0,r.Lk)("th",null,"Localidad"),(0,r.Lk)("th",null,"Departamento"),(0,r.Lk)("th",null,"Calificación"),(0,r.Lk)("th",null,"Comentarios")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.proveedoresFiltrados,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.rut_ci},[(0,r.Lk)("td",null,(0,f.v_)(e.rut_ci),1),(0,r.Lk)("td",null,(0,f.v_)(e.nombre),1),(0,r.Lk)("td",null,(0,f.v_)(e.alias),1),(0,r.Lk)("td",null,(0,f.v_)(e.telefono),1),(0,r.Lk)("td",null,(0,f.v_)(e.whatsapp),1),(0,r.Lk)("td",null,(0,f.v_)(e.mail),1),(0,r.Lk)("td",null,(0,f.v_)(e.rubro),1),(0,r.Lk)("td",null,(0,f.v_)(e.direccion),1),(0,r.Lk)("td",null,(0,f.v_)(e.localidad_nombre),1),(0,r.Lk)("td",null,(0,f.v_)(e.departamento_nombre),1),(0,r.Lk)("td",null,(0,f.v_)(e.calificación),1),(0,r.Lk)("td",null,(0,f.v_)(e.comentarios),1)])))),128))])]),(0,r.Lk)("div",ka,[(0,r.Lk)("button",{onClick:o[1]||(o[1]=e=>s.goTo("MenuPage")),class:"menu-boton"},"Menú")])])}var La={data(){return{proveedores:[],filtroNombre:""}},computed:{proveedoresFiltrados(){return this.proveedores.filter((e=>{const o=e.nombre?e.nombre.toLowerCase():"";return o.includes(this.filtroNombre.toLowerCase())}))}},mounted(){this.obtenerProveedores()},methods:{async obtenerProveedores(){try{const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/get_proveedor");this.proveedores=await e.json()}catch(e){console.error("Error al obtener proveedores:",e)}},goTo(e){this.$router.push({name:e})}}};const ga=(0,l.A)(La,[["render",fa],["__scopeId","data-v-ac7708b2"]]);var Ca=ga;const _a={class:"empleados-container"},ya={class:"filtros"},Ea={class:"empleado-container"},wa={class:"dropdown"},ja=["onMousedown"],Ma={class:"tabla-intervenciones"},Ia={class:"empleados-tabla"},Ta={class:"total-value"},Da={class:"total-value"};function Ua(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",_a,[o[15]||(o[15]=(0,r.Lk)("h1",{class:"titulo"},"INTERVENCIONES POR EMPLEADO",-1)),(0,r.Lk)("div",ya,[o[8]||(o[8]=(0,r.Lk)("label",{for:"empleado"},"Empleado",-1)),(0,r.Lk)("div",Ea,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>n.searchEmpleado=e),onInput:o[1]||(o[1]=(...e)=>s.filterEmpleados&&s.filterEmpleados(...e)),onFocus:o[2]||(o[2]=e=>n.showDropdown=!0),onBlur:o[3]||(o[3]=(...e)=>s.hideDropdown&&s.hideDropdown(...e)),placeholder:"Escriba para buscar...",class:"busqueda"},null,544),[[t.Jo,n.searchEmpleado]]),(0,r.bo)((0,r.Lk)("ul",wa,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredEmpleados,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,onMousedown:(0,t.D$)((o=>s.selectEmpleado(e)),["prevent"])},(0,f.v_)(e.nombre),41,ja)))),128))],512),[[t.aG,n.showDropdown&&n.filteredEmpleados.length]])]),o[9]||(o[9]=(0,r.Lk)("label",{for:"fechaDesde"},"Desde",-1)),(0,r.bo)((0,r.Lk)("input",{type:"date","onUpdate:modelValue":o[4]||(o[4]=e=>n.fechaDesde=e),class:"busqueda"},null,512),[[t.Jo,n.fechaDesde]]),o[10]||(o[10]=(0,r.Lk)("label",{for:"fechaHasta"},"Hasta",-1)),(0,r.bo)((0,r.Lk)("input",{type:"date","onUpdate:modelValue":o[5]||(o[5]=e=>n.fechaHasta=e),class:"busqueda"},null,512),[[t.Jo,n.fechaHasta]]),(0,r.Lk)("button",{onClick:o[6]||(o[6]=(...e)=>s.buscarIntervenciones&&s.buscarIntervenciones(...e)),class:"menu-boton"},"Buscar")]),(0,r.Lk)("div",Ma,[(0,r.Lk)("table",Ia,[o[14]||(o[14]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Tipo"),(0,r.Lk)("th",null,"División"),(0,r.Lk)("th",null,"Descripción"),(0,r.Lk)("th",null,"Horas"),(0,r.Lk)("th",null,"Costo")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.intervenciones.intervenciones,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,(0,f.v_)(e.tipo),1),(0,r.Lk)("td",null,(0,f.v_)(e.division),1),(0,r.Lk)("td",null,(0,f.v_)(e.descripcion),1),(0,r.Lk)("td",null,(0,f.v_)(e.horas_trabajadas),1),(0,r.Lk)("td",null,(0,f.v_)(e.costo_intervencion),1)])))),128))]),(0,r.Lk)("tfoot",null,[(0,r.Lk)("tr",null,[o[13]||(o[13]=(0,r.Lk)("td",{colspan:"3"},null,-1)),(0,r.Lk)("td",null,[o[11]||(o[11]=(0,r.Lk)("div",{class:"total-label"},"Total Horas",-1)),(0,r.Lk)("div",Ta,(0,f.v_)(n.intervenciones.total_horas),1)]),(0,r.Lk)("td",null,[o[12]||(o[12]=(0,r.Lk)("div",{class:"total-label"},"Total Costo",-1)),(0,r.Lk)("div",Da,(0,f.v_)(n.intervenciones.total_costo),1)])])])])]),(0,r.Lk)("button",{onClick:o[7]||(o[7]=e=>s.goTo("MenuPage")),class:"botones"},"Menú")])}var xa={data(){return{empleados:[],filteredEmpleados:[],empleadoSeleccionado:"",searchEmpleado:"",fechaDesde:"",fechaHasta:"",intervenciones:[],showDropdown:!1}},mounted(){this.obtenerEmpleados()},methods:{async obtenerEmpleados(){try{const e=await j.A.get("https://control-taller-1a9d81bbc513.herokuapp.com/obtener_empleados");this.empleados=e.data,this.filteredEmpleados=this.empleados}catch(e){console.error("Error al obtener empleados:",e)}},filterEmpleados(){this.filteredEmpleados=this.searchEmpleado?this.empleados.filter((e=>e.nombre.toLowerCase().includes(this.searchEmpleado.toLowerCase()))):this.empleados,this.showDropdown=!0},selectEmpleado(e){this.searchEmpleado=e.nombre,this.empleadoSeleccionado=e.cedula,this.showDropdown=!1},hideDropdown(){setTimeout((()=>{this.showDropdown=!1}),200)},async buscarIntervenciones(){if(this.empleadoSeleccionado&&this.fechaDesde&&this.fechaHasta)try{const e=await j.A.get("https://control-taller-1a9d81bbc513.herokuapp.com/get_intervenciones",{params:{empleado_id:this.empleadoSeleccionado,fecha_desde:this.fechaDesde,fecha_hasta:this.fechaHasta}});this.intervenciones=e.data}catch(e){console.error("Error al obtener intervenciones:",e)}else alert("Por favor, seleccione un empleado y un rango de fechas.")},goTo(e){this.$router.push({name:e})}}};const Aa=(0,l.A)(xa,[["render",Ua],["__scopeId","data-v-f4a5fabe"]]);var Fa=Aa;const Xa={class:"container mx-auto p-4"},Va={class:"p-4 bg-gray-100"},Pa={class:"grid grid-cols-3 gap-4 mt-2"},Sa=["value"],Na=["value"],Ra=["value"],Oa={class:"p-4 bg-white"},Ja={class:"grid grid-cols-2 gap-4 mt-2"},$a=["value"],qa=["value"],Ka={key:0,class:"modal"},Qa={class:"modal-contenido"},Ha={class:"flex justify-end mt-4"},Wa={class:"p-4 bg-gray-100"},Ga={class:"empleados-tabla w-full mt-2"},Ba={class:"total"},za={class:"total"},Ya={class:"p-4 bg-white"},Za={class:"empleados-tabla w-full mt-2"},et={class:"total"},ot={class:"p-4 bg-gray-100"},at={class:"grid grid-cols-3 gap-4 mt-2"},tt={class:"text-center mt-4"};function rt(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",Xa,[o[49]||(o[49]=(0,r.Lk)("div",{class:"titulo text-center"},"COSTOS POR ORDEN",-1)),(0,r.Lk)("div",Va,[o[48]||(o[48]=(0,r.Lk)("h2",{class:"titulo2"},"Elegir Orden:",-1)),(0,r.Lk)("div",Pa,[(0,r.Lk)("label",null,[o[20]||(o[20]=(0,r.eW)(" División: ")),(0,r.bo)((0,r.Lk)("select",{class:"busqueda w-full","onUpdate:modelValue":o[0]||(o[0]=e=>n.selectedDivision=e),onChange:o[1]||(o[1]=(...e)=>s.fetchTipos&&s.fetchTipos(...e))},[o[19]||(o[19]=(0,r.Lk)("option",{value:""},"Seleccione una opción",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.divisiones,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,Sa)))),128))],544),[[t.u1,n.selectedDivision]])]),(0,r.Lk)("label",null,[o[22]||(o[22]=(0,r.eW)(" Tipo: ")),(0,r.bo)((0,r.Lk)("select",{class:"busqueda w-full","onUpdate:modelValue":o[2]||(o[2]=e=>n.selectedTipo=e),onChange:o[3]||(o[3]=(...e)=>s.fetchDescripciones&&s.fetchDescripciones(...e))},[o[21]||(o[21]=(0,r.Lk)("option",{value:""},"Seleccione una opción",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.tipos,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,Na)))),128))],544),[[t.u1,n.selectedTipo]])]),(0,r.Lk)("label",null,[o[24]||(o[24]=(0,r.eW)(" Descripción: ")),(0,r.bo)((0,r.Lk)("select",{class:"busqueda w-full","onUpdate:modelValue":o[4]||(o[4]=e=>n.selectedDescripcion=e),onChange:o[5]||(o[5]=(...e)=>s.fetchOrdenDetalle&&s.fetchOrdenDetalle(...e))},[o[23]||(o[23]=(0,r.Lk)("option",{value:""},"Seleccione una opción",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.descripciones,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,f.v_)(e),9,Ra)))),128))],544),[[t.u1,n.selectedDescripcion]])])]),(0,r.Lk)("button",{class:"bg-blue-600 text-white px-4 py-2 rounded",onClick:o[6]||(o[6]=(...e)=>s.fetchOrdenDetalle&&s.fetchOrdenDetalle(...e))},"Buscar Orden"),(0,r.Lk)("div",Oa,[o[30]||(o[30]=(0,r.Lk)("h2",{class:"titulo2"},"Datos",-1)),(0,r.Lk)("div",Ja,[(0,r.Lk)("label",null,[o[25]||(o[25]=(0,r.eW)("Nro de orden: ")),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"busqueda w-full","onUpdate:modelValue":o[7]||(o[7]=e=>n.numeroOrden=e),disabled:""},null,512),[[t.Jo,n.numeroOrden]])]),(0,r.Lk)("label",null,[o[26]||(o[26]=(0,r.eW)("Cliente: ")),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"busqueda w-full","onUpdate:modelValue":o[8]||(o[8]=e=>n.clienteNombre=e),disabled:""},null,512),[[t.Jo,n.clienteNombre]])]),(0,r.Lk)("label",null,[o[27]||(o[27]=(0,r.eW)("Fecha inicio: ")),(0,r.Lk)("input",{type:"date",class:"busqueda w-full",value:n.fechaInicio,onInput:o[9]||(o[9]=e=>n.fechaInicio=e.target.value),disabled:""},null,40,$a)]),(0,r.Lk)("label",null,[o[28]||(o[28]=(0,r.eW)("Fecha fin: ")),(0,r.Lk)("input",{type:"date",class:"busqueda w-full",value:n.fechaFin,onInput:o[10]||(o[10]=e=>n.fechaFin=e.target.value),disabled:""},null,40,qa)]),(0,r.Lk)("label",null,[o[29]||(o[29]=(0,r.eW)("Costo total: ")),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"busqueda w-full","onUpdate:modelValue":o[11]||(o[11]=e=>n.costoTotalOrden=e),disabled:""},null,512),[[t.Jo,n.costoTotalOrden]])])])]),n.mostrarModal?((0,r.uX)(),(0,r.CE)("div",Ka,[(0,r.Lk)("div",Qa,[o[31]||(o[31]=(0,r.Lk)("h2",null,"La edición de estos datos modificará los resultados de los costos",-1)),o[32]||(o[32]=(0,r.Lk)("h3",null,"Ingrese la contraseña para acceder",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":o[12]||(o[12]=e=>n.password=e),class:"busqueda w-full"},null,512),[[t.Jo,n.password]]),(0,r.Lk)("div",Ha,[(0,r.Lk)("button",{class:"bg-red-600 text-white px-4 py-2 rounded",onClick:o[13]||(o[13]=(...e)=>s.validarPassword&&s.validarPassword(...e))},"Aceptar"),(0,r.Lk)("button",{class:"bg-gray-400 text-white px-4 py-2 rounded ml-2",onClick:o[14]||(o[14]=(...e)=>s.cerrarModal&&s.cerrarModal(...e))},"Cerrar")])])])):(0,r.Q3)("",!0),(0,r.Lk)("div",Wa,[o[39]||(o[39]=(0,r.Lk)("h2",{class:"titulo2"},"Mano de obra",-1)),(0,r.Lk)("table",Ga,[o[38]||(o[38]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Empleado"),(0,r.Lk)("th",null,"Horas"),(0,r.Lk)("th",null,"Costo")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.empleados,((e,o)=>((0,r.uX)(),(0,r.CE)("tr",{key:o},[(0,r.Lk)("td",null,(0,f.v_)(e.nombre),1),(0,r.Lk)("td",null,(0,f.v_)(e.horas),1),(0,r.Lk)("td",null,(0,f.v_)(e.costo),1)])))),128))]),(0,r.Lk)("tfoot",null,[(0,r.Lk)("tr",null,[o[37]||(o[37]=(0,r.Lk)("td",null,null,-1)),(0,r.Lk)("td",Ba,[o[33]||(o[33]=(0,r.eW)("Total horas:")),o[34]||(o[34]=(0,r.Lk)("br",null,null,-1)),(0,r.eW)((0,f.v_)(n.totalHoras),1)]),(0,r.Lk)("td",za,[o[35]||(o[35]=(0,r.eW)("Total costo:")),o[36]||(o[36]=(0,r.Lk)("br",null,null,-1)),(0,r.eW)((0,f.v_)(s.totalCosto),1)])])])])]),(0,r.Lk)("div",Ya,[o[44]||(o[44]=(0,r.Lk)("h2",{class:"titulo"},"Compras",-1)),(0,r.Lk)("table",Za,[o[43]||(o[43]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Proveedor"),(0,r.Lk)("th",null,"Nro Factura"),(0,r.Lk)("th",null,"Material"),(0,r.Lk)("th",null,"Importe")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.compras,((e,o)=>((0,r.uX)(),(0,r.CE)("tr",{key:o},[(0,r.Lk)("td",null,(0,f.v_)(e.proveedor),1),(0,r.Lk)("td",null,(0,f.v_)(e.numero_factura),1),(0,r.Lk)("td",null,(0,f.v_)(e.material),1),(0,r.Lk)("td",null,(0,f.v_)(e.importe),1)])))),128))]),(0,r.Lk)("tfoot",null,[(0,r.Lk)("tr",null,[o[42]||(o[42]=(0,r.Lk)("td",{colspan:"3"},null,-1)),(0,r.Lk)("td",et,[(0,r.Lk)("strong",null,[o[40]||(o[40]=(0,r.eW)("Total importe:")),o[41]||(o[41]=(0,r.Lk)("br",null,null,-1)),(0,r.eW)((0,f.v_)(s.totalImporte),1)])])])])])]),(0,r.Lk)("div",ot,[o[47]||(o[47]=(0,r.Lk)("h2",{class:"titulo2"},"Parámetros",-1)),(0,r.Lk)("div",at,[(0,r.Lk)("label",null,[o[45]||(o[45]=(0,r.eW)("Factor Fijo: ")),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"busqueda w-24","onUpdate:modelValue":o[15]||(o[15]=e=>n.factorFijo=e),disabled:""},null,512),[[t.Jo,n.factorFijo]])]),(0,r.Lk)("label",null,[o[46]||(o[46]=(0,r.eW)("Costo Fijo por Hora: ")),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"busqueda w-24","onUpdate:modelValue":o[16]||(o[16]=e=>n.costoFijoHora=e),disabled:""},null,512),[[t.Jo,n.costoFijoHora]])]),(0,r.Lk)("button",{class:"bg-red-600 text-white px-4 py-2 rounded",onClick:o[17]||(o[17]=(...e)=>s.solicitarAutenticacion&&s.solicitarAutenticacion(...e))},"Editar parámetros")])])]),(0,r.Lk)("div",tt,[(0,r.Lk)("button",{onClick:o[18]||(o[18]=e=>s.goTo("MenuPage")),class:"botones"},"Menú")])])}a(1454),a(8872);var it={data(){return{empleados:[{nombre:"nombre",horas:0,costo:0},{nombre:"nombre",horas:0,costo:0}],compras:[{proveedor:"nombre",factura:"Número de factura",material:"Material",importe:"Importe"},{proveedor:"nombre",factura:"Número de factura",material:"Material",importe:"Importe"}],divisiones:[],tipos:[],descripciones:[],selectedDivision:"",selectedTipo:"",selectedDescripcion:"",factorFijo:"",costoFijoHora:"",mostrarModal:!1,password:"",numeroOrden:"",clienteNombre:"",fechaInicio:"",fechaFin:"",costoTotalOrden:"",totalHoras:"00:00"}},computed:{totalCosto(){return this.empleados.reduce(((e,o)=>e+Number(o.costo)),0)},totalImporte(){return this.compras.reduce(((e,o)=>e+Number(o.importe)),0)}},methods:{async fetchDivisiones(){const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/divisiones");this.divisiones=await e.json()},async fetchTipos(){if(this.selectedDivision){const e=await fetch(`https://control-taller-1a9d81bbc513.herokuapp.com/tipos_por_division/${this.selectedDivision}`);this.tipos=await e.json()}},async fetchDescripciones(){if(this.selectedTipo){const e=await fetch(`https://control-taller-1a9d81bbc513.herokuapp.com/descripcion_por_tipo/${this.selectedTipo}`);this.descripciones=await e.json()}},async fetchConfiguraciones(){try{const e=await fetch("https://control-taller-1a9d81bbc513.herokuapp.com/configuraciones"),o=await e.json();this.factorFijo=o["factor_fijo"]||"N/A",this.costoFijoHora=o["costo_fijo_por_hora"]||"N/A"}catch(e){console.error("Error al obtener configuraciones",e)}},solicitarAutenticacion(){this.mostrarModal=!0},cerrarModal(){this.mostrarModal=!1,this.password=""},validarPassword(){"1234"===this.password?window.location.href="/parametros-form":alert("Contraseña incorrecta")},goTo(e){this.$router.push({name:e})},async fetchOrdenDetalle(){if(this.selectedDivision&&this.selectedTipo&&this.selectedDescripcion)try{const e=await fetch(`https://control-taller-1a9d81bbc513.herokuapp.com/ordenes/detalle?division=${this.selectedDivision}&tipo=${this.selectedTipo}&descripcion=${this.selectedDescripcion}`),o=await e.json();if(console.log("Datos recibidos:",o),o.error)return void alert(o.error);this.fechaInicio=o.fecha_inicio?new Date(o.fecha_inicio).toISOString().split("T")[0]:"",this.fechaFin=o.fecha_fin?new Date(o.fecha_fin).toISOString().split("T")[0]:"",this.$forceUpdate(),console.log("Fecha inicio cruda:",o.fecha_inicio),console.log("Fecha fin cruda:",o.fecha_fin),console.log("Fecha inicio procesada:",this.fechaInicio),console.log("Fecha fin procesada:",this.fechaFin),console.log("Datos recibidos:",JSON.stringify(o,null,2)),this.numeroOrden=o.numero_orden||"",this.clienteNombre=o.cliente_nombre||"",this.fechaInicio=o.fecha_inicio?new Date(o.fecha_inicio).toISOString().split("T")[0]:"",this.fechaFin=o.fecha_fin?new Date(o.fecha_fin).toISOString().split("T")[0]:"",this.costoTotalOrden=o.costo_total_orden||"",this.factorFijo=o.configuraciones?.factor_fijo||"",this.costoFijoHora=o.configuraciones?.costo_fijo_por_hora||"",this.totalHoras=o.total_horas||"00:00",this.compras=o.compras||[],this.empleados=o["mano de obra"]?.map((e=>({nombre:e.nombre,horas:e.total_horas_trabajadas,costo:e.costo_total})))||[]}catch(e){console.error("Error al obtener los detalles de la orden:",e)}else alert("Seleccione División, Tipo y Descripción.")}},mounted(){this.fetchDivisiones(),this.fetchConfiguraciones()}};const nt=(0,l.A)(it,[["render",rt],["__scopeId","data-v-742c2486"]]);var st=nt;const lt={class:"clasificacionordenes-container"},ct={key:0},dt={class:"clasificador"},ut={key:1},pt={class:"parametro"},mt={key:1},ht=["value"];function vt(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",lt,[o[13]||(o[13]=(0,r.Lk)("h1",{class:"titulo"},"Clasificación de órdenes",-1)),n.mensaje.texto?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,f.C4)(["mensaje",n.mensaje.tipo])},[(0,r.eW)((0,f.v_)(n.mensaje.texto)+" ",1),"confirmacion"===n.mensaje.tipo?((0,r.uX)(),(0,r.CE)("div",ct,[(0,r.Lk)("button",{onClick:o[0]||(o[0]=e=>s.guardarConfiguracion(n.mensaje.clave))},"Aceptar"),(0,r.Lk)("button",{onClick:o[1]||(o[1]=e=>s.cancelarConfirmacion(n.mensaje.clave))},"Cancelar")])):(0,r.Q3)("",!0)],2)):(0,r.Q3)("",!0),(0,r.Lk)("div",dt,[n.editando.division?((0,r.uX)(),(0,r.CE)("div",ut,[o[10]||(o[10]=(0,r.Lk)("label",null,"División",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=e=>n.clasificacion_ordenes.division=e)},null,512),[[t.Jo,n.clasificacion_ordenes.division]]),(0,r.Lk)("button",{onClick:o[4]||(o[4]=e=>s.confirmarGuardado("division"))},"Guardar")])):((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:o[2]||(o[2]=e=>s.iniciarEdicion("division"))},"Nueva División"))]),(0,r.Lk)("div",pt,[n.editando.tipo?((0,r.uX)(),(0,r.CE)("div",mt,[o[11]||(o[11]=(0,r.Lk)("label",null,"División",-1)),n.divisiones.length>0?(0,r.bo)(((0,r.uX)(),(0,r.CE)("select",{key:0,"onUpdate:modelValue":o[6]||(o[6]=e=>n.clasificacion_ordenes.divisionSeleccionada=e)},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.divisiones,((e,o)=>((0,r.uX)(),(0,r.CE)("option",{key:o,value:e},(0,f.v_)(e),9,ht)))),128))],512)),[[t.u1,n.clasificacion_ordenes.divisionSeleccionada]]):(0,r.Q3)("",!0),o[12]||(o[12]=(0,r.Lk)("label",null,"Tipo",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=e=>n.clasificacion_ordenes.tipo=e)},null,512),[[t.Jo,n.clasificacion_ordenes.tipo]]),(0,r.Lk)("button",{onClick:o[8]||(o[8]=e=>s.confirmarGuardado("tipo"))},"Guardar")])):((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:o[5]||(o[5]=e=>s.iniciarEdicion("tipo"))},"Nuevo Tipo"))]),(0,r.Lk)("button",{onClick:o[9]||(o[9]=e=>s.goTo("MenuPage")),class:"botones"},"Menú")])}var bt={data(){return{clasificacion_ordenes:{division:"",tipo:"",divisionSeleccionada:""},editando:{division:!1,tipo:!1},mensaje:{texto:"",tipo:"",clave:""},divisiones:[]}},mounted(){this.obtenerDivisiones()},methods:{async obtenerDivisiones(){try{const e=await j.A.get("https://control-taller-1a9d81bbc513.herokuapp.com/divisiones");this.divisiones=e.data}catch(e){console.error("Error al cargar las divisiones:",e)}},iniciarEdicion(e){this.editando[e]=!0},confirmarGuardado(e){this.mensaje={texto:`¿Seguro que deseas guardar la nueva clasificación de ${e}?`,tipo:"confirmacion",clave:e}},async guardarConfiguracion(e){"division"===e?await this.guardarDivision():"tipo"===e&&await this.guardarTipo()},async guardarDivision(){this.clasificacion_ordenes.division.trim()?(await this.enviarDatos("agregar_division",{nombre:this.clasificacion_ordenes.division}),this.mostrarMensaje("División guardada con éxito","exito"),this.limpiarCampos("division")):this.mostrarError("El nombre de la división no puede estar vacío")},async guardarTipo(){this.clasificacion_ordenes.tipo.trim()?this.clasificacion_ordenes.divisionSeleccionada?(await this.enviarDatos("agregar_tipo",{nombre:this.clasificacion_ordenes.tipo,division:this.clasificacion_ordenes.divisionSeleccionada}),this.mostrarMensaje("Tipo guardado con éxito","exito"),this.limpiarCampos("tipo")):this.mostrarError("Debes seleccionar una división"):this.mostrarError("El nombre del tipo no puede estar vacío")},async enviarDatos(e,o){try{await j.A.post(`https://control-taller-1a9d81bbc513.herokuapp.com/${e}`,o)}catch(a){this.mostrarError(a.response?.data?.error||"Error al guardar")}},mostrarMensaje(e,o){this.mensaje={texto:e,tipo:o},setTimeout((()=>{this.mensaje={texto:"",tipo:""}}),3e3)},mostrarError(e){this.mostrarMensaje(e,"error")},limpiarCampos(e){this.clasificacion_ordenes[e]="",this.editando[e]=!1},cancelarConfirmacion(e){this.mensaje={texto:"",tipo:"",clave:""},this.editando[e]=!1},goTo(e){this.$router.push({name:e})}}};const kt=(0,l.A)(bt,[["render",vt],["__scopeId","data-v-0282d3df"]]);var ft=kt;const Lt={class:"menu-container"},gt={class:"grid grid-cols-4 gap-8"},Ct={class:"column"},_t={class:"column"},yt={class:"column"},Et={class:"column"},wt={class:"mt-8 flex justify-center space-x-4"},jt={key:0,class:"error-message"},Mt={class:"modal-actions"};function It(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",Lt,[o[25]||(o[25]=(0,r.Lk)("h1",{class:"titulo"},"MENÚ",-1)),(0,r.Lk)("div",gt,[(0,r.Lk)("div",Ct,[o[21]||(o[21]=(0,r.Lk)("h2",{class:"column-title formularios-registro"},"Formularios de Registro",-1)),(0,r.Lk)("button",{onClick:o[0]||(o[0]=e=>s.goTo("ClienteForm")),class:"btn btn-register"},"Registrar Cliente"),(0,r.Lk)("button",{onClick:o[1]||(o[1]=e=>s.goTo("ProveedorForm")),class:"btn btn-register"},"Registrar Proveedor"),(0,r.Lk)("button",{onClick:o[2]||(o[2]=e=>s.goTo("EmpleadoForm")),class:"btn btn-register"},"Registrar Empleado"),(0,r.Lk)("button",{onClick:o[3]||(o[3]=e=>s.goTo("IntervencionForm")),class:"btn btn-register"},"Registrar Intervención"),(0,r.Lk)("button",{onClick:o[4]||(o[4]=e=>s.goTo("OrdenesForm")),class:"btn btn-register"},"Nueva Orden"),(0,r.Lk)("button",{onClick:o[5]||(o[5]=e=>s.goTo("ComprasForm")),class:"btn btn-register"},"Ingresar Compra")]),(0,r.Lk)("div",_t,[o[22]||(o[22]=(0,r.Lk)("h2",{class:"column-title listados"},"Listados",-1)),(0,r.Lk)("button",{onClick:o[6]||(o[6]=e=>s.goTo("VerClientes")),class:"btn btn-list"},"Ver Clientes"),(0,r.Lk)("button",{onClick:o[7]||(o[7]=e=>s.goTo("VerProveedores")),class:"btn btn-list"},"Ver Proveedores"),(0,r.Lk)("button",{onClick:o[8]||(o[8]=e=>s.goTo("VerEmpleados")),class:"btn btn-list"},"Ver Empleados")]),(0,r.Lk)("div",yt,[o[23]||(o[23]=(0,r.Lk)("h2",{class:"column-title consultas"},"Consultas",-1)),(0,r.Lk)("button",{onClick:o[9]||(o[9]=e=>s.goTo("ConsultaIntervenciones")),class:"btn btn-consult"},"Intervenciones por empleado"),(0,r.Lk)("button",{onClick:o[10]||(o[10]=e=>s.goTo("ConsultaCostosPorOrden")),class:"btn btn-consult"},"Costos por orden")]),(0,r.Lk)("div",Et,[o[24]||(o[24]=(0,r.Lk)("h2",{class:"column-title configuraciones"},"Configuraciones 🔒",-1)),(0,r.Lk)("button",{onClick:o[11]||(o[11]=(0,t.D$)((e=>s.openModal("ClasificacionOrdenes")),["stop"])),class:"btn btn-config"},"Clasificación de Órdenes"),(0,r.Lk)("button",{onClick:o[12]||(o[12]=(0,t.D$)((e=>s.openModal("ConfiguracionesForm")),["stop"])),class:"btn btn-config"},"Parámetros"),s.esPropietario?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:o[13]||(o[13]=(0,t.D$)((e=>s.openModal("EditarRoles")),["stop"])),class:"btn btn-config"}," Editar Roles ")):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",wt,[(0,r.Lk)("button",{class:"btn btn-secondary",onClick:o[14]||(o[14]=(...e)=>s.logout&&s.logout(...e))},"Cerrar sesión"),(0,r.Lk)("button",{class:"btn btn-secondary",onClick:o[15]||(o[15]=e=>s.goTo("CambiarContrasena"))},"Cambiar Contraseña")])]),n.showModal?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"modal-overlay",onClick:o[20]||(o[20]=(...e)=>s.closeModal&&s.closeModal(...e))},[(0,r.Lk)("div",{class:"modal",onClick:o[19]||(o[19]=(0,t.D$)((()=>{}),["stop"]))},[o[26]||(o[26]=(0,r.Lk)("h2",null,"Ingrese la contraseña para acceder",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":o[16]||(o[16]=e=>n.passwordInput=e),placeholder:"Contraseña",class:"password-input"},null,512),[[t.Jo,n.passwordInput]]),n.errorMessage?((0,r.uX)(),(0,r.CE)("p",jt,(0,f.v_)(n.errorMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("div",Mt,[(0,r.Lk)("button",{class:"btn btn-submit",onClick:o[17]||(o[17]=(...e)=>s.verifyPassword&&s.verifyPassword(...e))},"Aceptar"),(0,r.Lk)("button",{class:"btn btn-cancel",onClick:o[18]||(o[18]=(...e)=>s.closeModal&&s.closeModal(...e))},"Cancelar")])])])):(0,r.Q3)("",!0)],64)}var Tt={data(){return{showModal:!1,passwordInput:"",errorMessage:"",requestedRoute:null,rolUsuario:""}},computed:{esPropietario(){return"propietario"===this.rolUsuario}},methods:{openModal(e){console.log("Abriendo modal para:",e),this.requestedRoute=e,this.showModal=!0,this.passwordInput="",this.errorMessage=""},closeModal(){console.log("Cerrando modal"),this.showModal=!1,this.requestedRoute=null},verifyPassword(){const e="1234";this.passwordInput===e?(console.log("Contraseña correcta. Redirigiendo a:",this.requestedRoute),this.$router.push({name:this.requestedRoute}),this.closeModal()):(console.log("Contraseña incorrecta"),this.errorMessage="Contraseña incorrecta.")},goTo(e){this.$router.push({name:e})},logout(){confirm("¿Está seguro de que desea cerrar sesión?")&&(localStorage.removeItem("token"),localStorage.removeItem("rol"),this.$router.push({name:"Login"}))}},mounted(){this.rolUsuario=localStorage.getItem("rol")||"",localStorage.getItem("access_token")||this.$router.push({name:"Login"})}};const Dt=(0,l.A)(Tt,[["render",It],["__scopeId","data-v-37e72a09"]]);var Ut=Dt;const xt={class:"change-password-container"},At={class:"form-group"},Ft={class:"form-group"},Xt={class:"form-group"},Vt={class:"form-actions"},Pt={key:0,class:"error-message"};function St(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",xt,[o[9]||(o[9]=(0,r.Lk)("h1",{class:"titulo"},"Cambiar Contraseña",-1)),(0,r.Lk)("form",{onSubmit:o[4]||(o[4]=(0,t.D$)(((...e)=>s.submitForm&&s.submitForm(...e)),["prevent"])),class:"password-form"},[(0,r.Lk)("div",At,[o[5]||(o[5]=(0,r.Lk)("label",{for:"current-password"},"Contraseña Actual",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"current-password","onUpdate:modelValue":o[0]||(o[0]=e=>n.currentPassword=e),required:"",placeholder:"Ingrese su contraseña actual"},null,512),[[t.Jo,n.currentPassword]])]),(0,r.Lk)("div",Ft,[o[6]||(o[6]=(0,r.Lk)("label",{for:"new-password"},"Nueva Contraseña",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"new-password","onUpdate:modelValue":o[1]||(o[1]=e=>n.newPassword=e),required:"",placeholder:"Ingrese su nueva contraseña"},null,512),[[t.Jo,n.newPassword]])]),(0,r.Lk)("div",Xt,[o[7]||(o[7]=(0,r.Lk)("label",{for:"confirm-password"},"Confirmar Nueva Contraseña",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"confirm-password","onUpdate:modelValue":o[2]||(o[2]=e=>n.confirmPassword=e),required:"",placeholder:"Confirme su nueva contraseña"},null,512),[[t.Jo,n.confirmPassword]])]),(0,r.Lk)("div",Vt,[o[8]||(o[8]=(0,r.Lk)("button",{type:"submit",class:"btn btn-submit"},"Cambiar Contraseña",-1)),(0,r.Lk)("button",{onClick:o[3]||(o[3]=(...e)=>s.cancel&&s.cancel(...e)),class:"btn btn-cancel"},"Cancelar")]),n.errorMessage?((0,r.uX)(),(0,r.CE)("p",Pt,(0,f.v_)(n.errorMessage),1)):(0,r.Q3)("",!0)],32)])}var Nt={data(){return{currentPassword:"",newPassword:"",confirmPassword:"",errorMessage:""}},methods:{submitForm(){if(this.newPassword!==this.confirmPassword)return void(this.errorMessage="Las contraseñas no coinciden.");const e={currentPassword:this.currentPassword,newPassword:this.newPassword};this.$axios.post("/api/change-password",e).then((()=>{alert("Contraseña cambiada exitosamente."),this.$router.push({name:"Menu"})})).catch((()=>{this.errorMessage="Error al cambiar la contraseña."}))},cancel(){this.$router.push({name:"Menu"})}}};const Rt=(0,l.A)(Nt,[["render",St],["__scopeId","data-v-dad678a8"]]);var Ot=Rt;const Jt={class:"usuarios"},$t=["onUpdate:modelValue"],qt=["onClick"];function Kt(e,o,a,i,n,s){return(0,r.uX)(),(0,r.CE)("div",Jt,[o[3]||(o[3]=(0,r.Lk)("h1",null,"Lista de Usuarios",-1)),(0,r.Lk)("table",null,[o[2]||(o[2]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Usuario"),(0,r.Lk)("th",null,"Nombre del Empleado"),(0,r.Lk)("th",null,"Rol"),(0,r.Lk)("th",null,"Acción")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.usuarios,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.usuario},[(0,r.Lk)("td",null,(0,f.v_)(e.usuario),1),(0,r.Lk)("td",null,(0,f.v_)(e.nombre_empleado),1),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":o=>e.rol=o},o[1]||(o[1]=[(0,r.Lk)("option",{value:"propietario"},"Propietario",-1),(0,r.Lk)("option",{value:"administracion"},"Administración",-1),(0,r.Lk)("option",{value:"operario"},"Operario",-1)]),8,$t),[[t.u1,e.rol]])]),(0,r.Lk)("td",null,[(0,r.Lk)("button",{onClick:o=>s.actualizarRol(e)},"Guardar",8,qt)])])))),128))])]),(0,r.Lk)("button",{onClick:o[0]||(o[0]=e=>s.goTo("MenuPage")),class:"btn"},"Menú"),n.mensaje?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,f.C4)(["mensaje",n.tipoMensaje])},(0,f.v_)(n.mensaje),3)):(0,r.Q3)("",!0)])}var Qt={name:"UsuariosPage",data(){return{usuarios:[],mensaje:"",tipoMensaje:""}},methods:{async obtenerUsuarios(){try{const e=await j.A.get("https://control-taller-1a9d81bbc513.herokuapp.com/obtener_todos_usuarios");this.usuarios=e.data}catch(e){console.error("Error obteniendo usuarios",e)}},async actualizarRol(e){try{const o=await j.A.put("https://control-taller-1a9d81bbc513.herokuapp.com/editar_rol",{usuario:e.usuario,nuevo_rol:e.rol});o.data.success?(this.mensaje="Rol actualizado correctamente",this.tipoMensaje="exito"):(this.mensaje=o.data.message||"Error al actualizar el rol",this.tipoMensaje="error")}catch(o){this.mensaje="Error de conexión con el servidor",this.tipoMensaje="error"}},goTo(e){this.$router.push({name:e})}},mounted(){this.obtenerUsuarios()}};const Ht=(0,l.A)(Qt,[["render",Kt],["__scopeId","data-v-a874ad2c"]]);var Wt=Ht;const Gt=[{path:"/",name:"Home",component:k},{path:"/login",name:"Login",component:T},{path:"/register",name:"Register",component:O},{path:"/menu",name:"MenuPage",component:Ut,meta:{requiresAuth:!0}},{path:"/empleado-form",name:"EmpleadoForm",component:ee,meta:{requiresAuth:!0}},{path:"/proveedor-form",name:"ProveedorForm",component:ye,meta:{requiresAuth:!0}},{path:"/cliente-form",name:"ClienteForm",component:Re,meta:{requiresAuth:!0}},{path:"/ordenes-form",name:"OrdenesForm",component:Ge,meta:{requiresAuth:!0}},{path:"/intervencion-form",name:"IntervencionForm",component:io,meta:{requiresAuth:!0}},{path:"/intervencion-operario",name:"IntervencionOperario",component:Lo,meta:{requiresAuth:!0,role:"operario"}},{path:"/compras-form",name:"ComprasForm",component:$o,meta:{requiresAuth:!0}},{path:"/parametros-form",name:"ConfiguracionesForm",component:ea,meta:{requiresAuth:!0}},{path:"/ver-empleados",name:"VerEmpleados",component:sa,meta:{requiresAuth:!0}},{path:"/ver-clientes",name:"VerClientes",component:ha,meta:{requiresAuth:!0}},{path:"/ver-proveedores",name:"VerProveedores",component:Ca,meta:{requiresAuth:!0}},{path:"/consulta-intervenciones",name:"ConsultaIntervenciones",component:Fa,meta:{requiresAuth:!0}},{path:"/consulta-costos-por-orden",name:"ConsultaCostosPorOrden",component:st,meta:{requiresAuth:!0}},{path:"/clasificacion-ordenes",name:"ClasificacionOrdenes",component:ft,meta:{requiresAuth:!0}},{path:"/cambiar-contrasena",name:"CambiarContrasena",component:Ot,meta:{requiresAuth:!0}},{path:"/editar-roles",name:"EditarRoles",component:Wt,meta:{requiresAuth:!0}}],Bt=(0,u.aE)({history:(0,u.LA)(),routes:Gt});Bt.beforeEach(((e,o,a)=>{const t=!!localStorage.getItem("access_token"),r=localStorage.getItem("rol")||"";return"/"===e.path||"/login"===e.path||"/register"===e.path?a():t?"operario"!==r||["/intervencion-operario","/ordenes-form","/cambiar-contrasena"].includes(e.path)?"/editar-roles"===e.path&&"propietario"!==r?(console.log("Usuario sin permisos para editar roles, redirigiendo."),a("/")):void a():(console.log("Operario intentando acceder a una ruta no permitida, redirigiendo."),a("/intervencion-operario")):(console.log("Usuario no autenticado, redirigiendo a login."),a("/login"))}));var zt=Bt;(0,t.Ef)(d).use(zt).mount("#app")}},o={};function a(t){var r=o[t];if(void 0!==r)return r.exports;var i=o[t]={exports:{}};return e[t].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(o,t,r,i){if(!t){var n=1/0;for(d=0;d<e.length;d++){t=e[d][0],r=e[d][1],i=e[d][2];for(var s=!0,l=0;l<t.length;l++)(!1&i||n>=i)&&Object.keys(a.O).every((function(e){return a.O[e](t[l])}))?t.splice(l--,1):(s=!1,i<n&&(n=i));if(s){e.splice(d--,1);var c=r();void 0!==c&&(o=c)}}return o}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[t,r,i]}}(),function(){a.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(o,{a:o}),o}}(),function(){a.d=function(e,o){for(var t in o)a.o(o,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(o){return 0===e[o]};var o=function(o,t){var r,i,n=t[0],s=t[1],l=t[2],c=0;if(n.some((function(o){return 0!==e[o]}))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(l)var d=l(a)}for(o&&o(t);c<n.length;c++)i=n[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},t=self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))}();var t=a.O(void 0,[504],(function(){return a(6598)}));t=a.O(t)})();
//# sourceMappingURL=app.62088e22.js.map